import { createHotContext as __vite__createHotContext } from "/@vite/client";import.meta.hot = __vite__createHotContext("/src/modules/object-record/object-filter-dropdown/components/ObjectFilterDropdownFilterSelectMenuItem.tsx");if (!window.$RefreshReg$) throw new Error("React refresh preamble was not loaded. Something is wrong.");
const prevRefreshReg = window.$RefreshReg$;
const prevRefreshSig = window.$RefreshSig$;
window.$RefreshReg$ = RefreshRuntime.getRefreshReg("D:/twenty-table-o/packages/twenty-front/src/modules/object-record/object-filter-dropdown/components/ObjectFilterDropdownFilterSelectMenuItem.tsx");
window.$RefreshSig$ = RefreshRuntime.createSignatureFunctionForTransform;

import * as RefreshRuntime from "/@react-refresh";

import { jsxDEV as _jsxDEV } from "/@fs/D:/twenty-table-o/node_modules/.vite/packages/twenty-front/deps/@emotion_react_jsx-dev-runtime.js?v=226f7286";
var _s = $RefreshSig$();
import { OBJECT_FILTER_DROPDOWN_ID } from "/src/modules/object-record/object-filter-dropdown/constants/ObjectFilterDropdownId.ts";
import { fieldMetadataItemIdUsedInDropdownComponentState } from "/src/modules/object-record/object-filter-dropdown/states/fieldMetadataItemIdUsedInDropdownComponentState.ts";
import { objectFilterDropdownFilterIsSelectedComponentState } from "/src/modules/object-record/object-filter-dropdown/states/objectFilterDropdownFilterIsSelectedComponentState.ts";
import { objectFilterDropdownIsSelectingCompositeFieldComponentState } from "/src/modules/object-record/object-filter-dropdown/states/objectFilterDropdownIsSelectingCompositeFieldComponentState.ts";
import { objectFilterDropdownSubMenuFieldTypeComponentState } from "/src/modules/object-record/object-filter-dropdown/states/objectFilterDropdownSubMenuFieldTypeComponentState.ts";
import { selectedOperandInDropdownComponentState } from "/src/modules/object-record/object-filter-dropdown/states/selectedOperandInDropdownComponentState.ts";
import { getFilterTypeFromFieldType } from "/src/modules/object-metadata/utils/formatFieldMetadataItemsAsFilterDefinitions.ts";
import { selectedFilterComponentState } from "/src/modules/object-record/object-filter-dropdown/states/selectedFilterComponentState.ts";
import { isCompositeField } from "/src/modules/object-record/object-filter-dropdown/utils/isCompositeField.ts";
import { currentRecordFiltersComponentState } from "/src/modules/object-record/record-filter/states/currentRecordFiltersComponentState.ts";
import { findDuplicateRecordFilterInNonAdvancedRecordFilters } from "/src/modules/object-record/record-filter/utils/findDuplicateRecordFilterInNonAdvancedRecordFilters.ts";
import { getRecordFilterOperands } from "/src/modules/object-record/record-filter/utils/getRecordFilterOperands.ts";
import { SingleRecordPickerHotkeyScope } from "/src/modules/object-record/record-picker/single-record-picker/types/SingleRecordPickerHotkeyScope.ts";
import { useSelectableList } from "/src/modules/ui/layout/selectable-list/hooks/useSelectableList.ts";
import { useSetHotkeyScope } from "/src/modules/ui/utilities/hotkey/hooks/useSetHotkeyScope.ts";
import { useRecoilComponentStateV2 } from "/src/modules/ui/utilities/state/component-state/hooks/useRecoilComponentStateV2.ts";
import { useRecoilComponentValueV2 } from "/src/modules/ui/utilities/state/component-state/hooks/useRecoilComponentValueV2.ts";
import { useSetRecoilComponentStateV2 } from "/src/modules/ui/utilities/state/component-state/hooks/useSetRecoilComponentStateV2.ts";
import { useRecoilValue } from "/@fs/D:/twenty-table-o/node_modules/.vite/packages/twenty-front/deps/recoil.js?v=226f7286";
import { MenuItemSelect, useIcons } from "/@fs/D:/twenty-table-o/packages/twenty-ui/src/index.ts";
import { isDefined } from "/@fs/D:/twenty-table-o/packages/twenty-shared/utils/dist/twenty-shared-utils.esm.js";
export const ObjectFilterDropdownFilterSelectMenuItem = ({ fieldMetadataItemToSelect })=>{
    _s();
    const setFieldMetadataItemIdUsedInDropdown = useSetRecoilComponentStateV2(fieldMetadataItemIdUsedInDropdownComponentState);
    const [, setObjectFilterDropdownSubMenuFieldType] = useRecoilComponentStateV2(objectFilterDropdownSubMenuFieldTypeComponentState);
    const [, setObjectFilterDropdownIsSelectingCompositeField] = useRecoilComponentStateV2(objectFilterDropdownIsSelectingCompositeFieldComponentState);
    const [, setObjectFilterDropdownFilterIsSelected] = useRecoilComponentStateV2(objectFilterDropdownFilterIsSelectedComponentState);
    const { isSelectedItemIdSelector, resetSelectedItem } = useSelectableList(OBJECT_FILTER_DROPDOWN_ID);
    const isSelectedItem = useRecoilValue(isSelectedItemIdSelector(fieldMetadataItemToSelect.id));
    const setSelectedOperandInDropdown = useSetRecoilComponentStateV2(selectedOperandInDropdownComponentState);
    const setHotkeyScope = useSetHotkeyScope();
    const currentRecordFilters = useRecoilComponentValueV2(currentRecordFiltersComponentState);
    const setSelectedFilter = useSetRecoilComponentStateV2(selectedFilterComponentState);
    const handleSelectFilter = (fieldMetadataItem)=>{
        setFieldMetadataItemIdUsedInDropdown(fieldMetadataItem.id);
        const filterType = getFilterTypeFromFieldType(fieldMetadataItem.type);
        if (filterType === 'RELATION' || filterType === 'SELECT') {
            setHotkeyScope(SingleRecordPickerHotkeyScope.SingleRecordPicker);
        }
        const defaultOperand = getRecordFilterOperands({
            filterType
        })[0];
        setObjectFilterDropdownFilterIsSelected(true);
        const duplicateFilterInCurrentRecordFilters = findDuplicateRecordFilterInNonAdvancedRecordFilters({
            recordFilters: currentRecordFilters,
            fieldMetadataItemId: fieldMetadataItem.id
        });
        const filterIsAlreadyInCurrentRecordFilters = isDefined(duplicateFilterInCurrentRecordFilters);
        if (filterIsAlreadyInCurrentRecordFilters) {
            setSelectedFilter({
                ...duplicateFilterInCurrentRecordFilters
            });
            setSelectedOperandInDropdown(duplicateFilterInCurrentRecordFilters.operand);
        } else {
            setSelectedOperandInDropdown(defaultOperand);
        }
    };
    const { getIcon } = useIcons();
    const Icon = getIcon(fieldMetadataItemToSelect.icon);
    const shouldShowSubMenu = isCompositeField(fieldMetadataItemToSelect.type);
    const handleClick = ()=>{
        resetSelectedItem();
        const filterType = getFilterTypeFromFieldType(fieldMetadataItemToSelect.type);
        if (isCompositeField(filterType)) {
            setObjectFilterDropdownSubMenuFieldType(filterType);
            setFieldMetadataItemIdUsedInDropdown(fieldMetadataItemToSelect.id);
            setObjectFilterDropdownIsSelectingCompositeField(true);
        } else {
            handleSelectFilter(fieldMetadataItemToSelect);
        }
    };
    return /*#__PURE__*/ _jsxDEV(MenuItemSelect, {
        selected: false,
        hovered: isSelectedItem,
        onClick: handleClick,
        LeftIcon: Icon,
        text: fieldMetadataItemToSelect.label,
        hasSubMenu: shouldShowSubMenu
    }, void 0, false, {
        fileName: "D:/twenty-table-o/packages/twenty-front/src/modules/object-record/object-filter-dropdown/components/ObjectFilterDropdownFilterSelectMenuItem.tsx",
        lineNumber: 134,
        columnNumber: 5
    }, this);
};
_s(ObjectFilterDropdownFilterSelectMenuItem, "tyJE/QKuSYUvuvt1+zGBSL/g+Rc=", false, function() {
    return [
        useSetRecoilComponentStateV2,
        useRecoilComponentStateV2,
        useRecoilComponentStateV2,
        useRecoilComponentStateV2,
        useSelectableList,
        useRecoilValue,
        useSetRecoilComponentStateV2,
        useSetHotkeyScope,
        useRecoilComponentValueV2,
        useSetRecoilComponentStateV2,
        useIcons
    ];
});
_c = ObjectFilterDropdownFilterSelectMenuItem;
var _c;
$RefreshReg$(_c, "ObjectFilterDropdownFilterSelectMenuItem");


window.$RefreshReg$ = prevRefreshReg;
window.$RefreshSig$ = prevRefreshSig;

RefreshRuntime.__hmr_import(import.meta.url).then((currentExports) => {
  RefreshRuntime.registerExportsForReactRefresh("D:/twenty-table-o/packages/twenty-front/src/modules/object-record/object-filter-dropdown/components/ObjectFilterDropdownFilterSelectMenuItem.tsx", currentExports);
  import.meta.hot.accept((nextExports) => {
    if (!nextExports) return;
    const invalidateMessage = RefreshRuntime.validateRefreshBoundaryAndEnqueueUpdate("D:/twenty-table-o/packages/twenty-front/src/modules/object-record/object-filter-dropdown/components/ObjectFilterDropdownFilterSelectMenuItem.tsx", currentExports, nextExports);
    if (invalidateMessage) import.meta.hot.invalidate(invalidateMessage);
  });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIk9iamVjdEZpbHRlckRyb3Bkb3duRmlsdGVyU2VsZWN0TWVudUl0ZW0udHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE9CSkVDVF9GSUxURVJfRFJPUERPV05fSUQgfSBmcm9tICdAL29iamVjdC1yZWNvcmQvb2JqZWN0LWZpbHRlci1kcm9wZG93bi9jb25zdGFudHMvT2JqZWN0RmlsdGVyRHJvcGRvd25JZCc7XG5pbXBvcnQgeyBmaWVsZE1ldGFkYXRhSXRlbUlkVXNlZEluRHJvcGRvd25Db21wb25lbnRTdGF0ZSB9IGZyb20gJ0Avb2JqZWN0LXJlY29yZC9vYmplY3QtZmlsdGVyLWRyb3Bkb3duL3N0YXRlcy9maWVsZE1ldGFkYXRhSXRlbUlkVXNlZEluRHJvcGRvd25Db21wb25lbnRTdGF0ZSc7XG5pbXBvcnQgeyBvYmplY3RGaWx0ZXJEcm9wZG93bkZpbHRlcklzU2VsZWN0ZWRDb21wb25lbnRTdGF0ZSB9IGZyb20gJ0Avb2JqZWN0LXJlY29yZC9vYmplY3QtZmlsdGVyLWRyb3Bkb3duL3N0YXRlcy9vYmplY3RGaWx0ZXJEcm9wZG93bkZpbHRlcklzU2VsZWN0ZWRDb21wb25lbnRTdGF0ZSc7XG5cbmltcG9ydCB7IG9iamVjdEZpbHRlckRyb3Bkb3duSXNTZWxlY3RpbmdDb21wb3NpdGVGaWVsZENvbXBvbmVudFN0YXRlIH0gZnJvbSAnQC9vYmplY3QtcmVjb3JkL29iamVjdC1maWx0ZXItZHJvcGRvd24vc3RhdGVzL29iamVjdEZpbHRlckRyb3Bkb3duSXNTZWxlY3RpbmdDb21wb3NpdGVGaWVsZENvbXBvbmVudFN0YXRlJztcbmltcG9ydCB7IG9iamVjdEZpbHRlckRyb3Bkb3duU3ViTWVudUZpZWxkVHlwZUNvbXBvbmVudFN0YXRlIH0gZnJvbSAnQC9vYmplY3QtcmVjb3JkL29iamVjdC1maWx0ZXItZHJvcGRvd24vc3RhdGVzL29iamVjdEZpbHRlckRyb3Bkb3duU3ViTWVudUZpZWxkVHlwZUNvbXBvbmVudFN0YXRlJztcbmltcG9ydCB7IHNlbGVjdGVkT3BlcmFuZEluRHJvcGRvd25Db21wb25lbnRTdGF0ZSB9IGZyb20gJ0Avb2JqZWN0LXJlY29yZC9vYmplY3QtZmlsdGVyLWRyb3Bkb3duL3N0YXRlcy9zZWxlY3RlZE9wZXJhbmRJbkRyb3Bkb3duQ29tcG9uZW50U3RhdGUnO1xuXG5pbXBvcnQgeyBGaWVsZE1ldGFkYXRhSXRlbSB9IGZyb20gJ0Avb2JqZWN0LW1ldGFkYXRhL3R5cGVzL0ZpZWxkTWV0YWRhdGFJdGVtJztcbmltcG9ydCB7IGdldEZpbHRlclR5cGVGcm9tRmllbGRUeXBlIH0gZnJvbSAnQC9vYmplY3QtbWV0YWRhdGEvdXRpbHMvZm9ybWF0RmllbGRNZXRhZGF0YUl0ZW1zQXNGaWx0ZXJEZWZpbml0aW9ucyc7XG5pbXBvcnQgeyBzZWxlY3RlZEZpbHRlckNvbXBvbmVudFN0YXRlIH0gZnJvbSAnQC9vYmplY3QtcmVjb3JkL29iamVjdC1maWx0ZXItZHJvcGRvd24vc3RhdGVzL3NlbGVjdGVkRmlsdGVyQ29tcG9uZW50U3RhdGUnO1xuaW1wb3J0IHsgaXNDb21wb3NpdGVGaWVsZCB9IGZyb20gJ0Avb2JqZWN0LXJlY29yZC9vYmplY3QtZmlsdGVyLWRyb3Bkb3duL3V0aWxzL2lzQ29tcG9zaXRlRmllbGQnO1xuaW1wb3J0IHsgY3VycmVudFJlY29yZEZpbHRlcnNDb21wb25lbnRTdGF0ZSB9IGZyb20gJ0Avb2JqZWN0LXJlY29yZC9yZWNvcmQtZmlsdGVyL3N0YXRlcy9jdXJyZW50UmVjb3JkRmlsdGVyc0NvbXBvbmVudFN0YXRlJztcbmltcG9ydCB7IGZpbmREdXBsaWNhdGVSZWNvcmRGaWx0ZXJJbk5vbkFkdmFuY2VkUmVjb3JkRmlsdGVycyB9IGZyb20gJ0Avb2JqZWN0LXJlY29yZC9yZWNvcmQtZmlsdGVyL3V0aWxzL2ZpbmREdXBsaWNhdGVSZWNvcmRGaWx0ZXJJbk5vbkFkdmFuY2VkUmVjb3JkRmlsdGVycyc7XG5pbXBvcnQgeyBnZXRSZWNvcmRGaWx0ZXJPcGVyYW5kcyB9IGZyb20gJ0Avb2JqZWN0LXJlY29yZC9yZWNvcmQtZmlsdGVyL3V0aWxzL2dldFJlY29yZEZpbHRlck9wZXJhbmRzJztcbmltcG9ydCB7IFNpbmdsZVJlY29yZFBpY2tlckhvdGtleVNjb3BlIH0gZnJvbSAnQC9vYmplY3QtcmVjb3JkL3JlY29yZC1waWNrZXIvc2luZ2xlLXJlY29yZC1waWNrZXIvdHlwZXMvU2luZ2xlUmVjb3JkUGlja2VySG90a2V5U2NvcGUnO1xuaW1wb3J0IHsgdXNlU2VsZWN0YWJsZUxpc3QgfSBmcm9tICdAL3VpL2xheW91dC9zZWxlY3RhYmxlLWxpc3QvaG9va3MvdXNlU2VsZWN0YWJsZUxpc3QnO1xuaW1wb3J0IHsgdXNlU2V0SG90a2V5U2NvcGUgfSBmcm9tICdAL3VpL3V0aWxpdGllcy9ob3RrZXkvaG9va3MvdXNlU2V0SG90a2V5U2NvcGUnO1xuaW1wb3J0IHsgdXNlUmVjb2lsQ29tcG9uZW50U3RhdGVWMiB9IGZyb20gJ0AvdWkvdXRpbGl0aWVzL3N0YXRlL2NvbXBvbmVudC1zdGF0ZS9ob29rcy91c2VSZWNvaWxDb21wb25lbnRTdGF0ZVYyJztcbmltcG9ydCB7IHVzZVJlY29pbENvbXBvbmVudFZhbHVlVjIgfSBmcm9tICdAL3VpL3V0aWxpdGllcy9zdGF0ZS9jb21wb25lbnQtc3RhdGUvaG9va3MvdXNlUmVjb2lsQ29tcG9uZW50VmFsdWVWMic7XG5pbXBvcnQgeyB1c2VTZXRSZWNvaWxDb21wb25lbnRTdGF0ZVYyIH0gZnJvbSAnQC91aS91dGlsaXRpZXMvc3RhdGUvY29tcG9uZW50LXN0YXRlL2hvb2tzL3VzZVNldFJlY29pbENvbXBvbmVudFN0YXRlVjInO1xuaW1wb3J0IHsgdXNlUmVjb2lsVmFsdWUgfSBmcm9tICdyZWNvaWwnO1xuaW1wb3J0IHsgTWVudUl0ZW1TZWxlY3QsIHVzZUljb25zIH0gZnJvbSAndHdlbnR5LXVpJztcbmltcG9ydCB7IGlzRGVmaW5lZCB9IGZyb20gJ3R3ZW50eS1zaGFyZWQvdXRpbHMnO1xuXG5leHBvcnQgdHlwZSBPYmplY3RGaWx0ZXJEcm9wZG93bkZpbHRlclNlbGVjdE1lbnVJdGVtUHJvcHMgPSB7XG4gIGZpZWxkTWV0YWRhdGFJdGVtVG9TZWxlY3Q6IEZpZWxkTWV0YWRhdGFJdGVtO1xufTtcblxuZXhwb3J0IGNvbnN0IE9iamVjdEZpbHRlckRyb3Bkb3duRmlsdGVyU2VsZWN0TWVudUl0ZW0gPSAoe1xuICBmaWVsZE1ldGFkYXRhSXRlbVRvU2VsZWN0LFxufTogT2JqZWN0RmlsdGVyRHJvcGRvd25GaWx0ZXJTZWxlY3RNZW51SXRlbVByb3BzKSA9PiB7XG4gIGNvbnN0IHNldEZpZWxkTWV0YWRhdGFJdGVtSWRVc2VkSW5Ecm9wZG93biA9IHVzZVNldFJlY29pbENvbXBvbmVudFN0YXRlVjIoXG4gICAgZmllbGRNZXRhZGF0YUl0ZW1JZFVzZWRJbkRyb3Bkb3duQ29tcG9uZW50U3RhdGUsXG4gICk7XG5cbiAgY29uc3QgWywgc2V0T2JqZWN0RmlsdGVyRHJvcGRvd25TdWJNZW51RmllbGRUeXBlXSA9IHVzZVJlY29pbENvbXBvbmVudFN0YXRlVjIoXG4gICAgb2JqZWN0RmlsdGVyRHJvcGRvd25TdWJNZW51RmllbGRUeXBlQ29tcG9uZW50U3RhdGUsXG4gICk7XG5cbiAgY29uc3QgWywgc2V0T2JqZWN0RmlsdGVyRHJvcGRvd25Jc1NlbGVjdGluZ0NvbXBvc2l0ZUZpZWxkXSA9XG4gICAgdXNlUmVjb2lsQ29tcG9uZW50U3RhdGVWMihcbiAgICAgIG9iamVjdEZpbHRlckRyb3Bkb3duSXNTZWxlY3RpbmdDb21wb3NpdGVGaWVsZENvbXBvbmVudFN0YXRlLFxuICAgICk7XG5cbiAgY29uc3QgWywgc2V0T2JqZWN0RmlsdGVyRHJvcGRvd25GaWx0ZXJJc1NlbGVjdGVkXSA9IHVzZVJlY29pbENvbXBvbmVudFN0YXRlVjIoXG4gICAgb2JqZWN0RmlsdGVyRHJvcGRvd25GaWx0ZXJJc1NlbGVjdGVkQ29tcG9uZW50U3RhdGUsXG4gICk7XG5cbiAgY29uc3QgeyBpc1NlbGVjdGVkSXRlbUlkU2VsZWN0b3IsIHJlc2V0U2VsZWN0ZWRJdGVtIH0gPSB1c2VTZWxlY3RhYmxlTGlzdChcbiAgICBPQkpFQ1RfRklMVEVSX0RST1BET1dOX0lELFxuICApO1xuXG4gIGNvbnN0IGlzU2VsZWN0ZWRJdGVtID0gdXNlUmVjb2lsVmFsdWUoXG4gICAgaXNTZWxlY3RlZEl0ZW1JZFNlbGVjdG9yKGZpZWxkTWV0YWRhdGFJdGVtVG9TZWxlY3QuaWQpLFxuICApO1xuXG4gIGNvbnN0IHNldFNlbGVjdGVkT3BlcmFuZEluRHJvcGRvd24gPSB1c2VTZXRSZWNvaWxDb21wb25lbnRTdGF0ZVYyKFxuICAgIHNlbGVjdGVkT3BlcmFuZEluRHJvcGRvd25Db21wb25lbnRTdGF0ZSxcbiAgKTtcblxuICBjb25zdCBzZXRIb3RrZXlTY29wZSA9IHVzZVNldEhvdGtleVNjb3BlKCk7XG5cbiAgY29uc3QgY3VycmVudFJlY29yZEZpbHRlcnMgPSB1c2VSZWNvaWxDb21wb25lbnRWYWx1ZVYyKFxuICAgIGN1cnJlbnRSZWNvcmRGaWx0ZXJzQ29tcG9uZW50U3RhdGUsXG4gICk7XG5cbiAgY29uc3Qgc2V0U2VsZWN0ZWRGaWx0ZXIgPSB1c2VTZXRSZWNvaWxDb21wb25lbnRTdGF0ZVYyKFxuICAgIHNlbGVjdGVkRmlsdGVyQ29tcG9uZW50U3RhdGUsXG4gICk7XG5cbiAgY29uc3QgaGFuZGxlU2VsZWN0RmlsdGVyID0gKGZpZWxkTWV0YWRhdGFJdGVtOiBGaWVsZE1ldGFkYXRhSXRlbSkgPT4ge1xuICAgIHNldEZpZWxkTWV0YWRhdGFJdGVtSWRVc2VkSW5Ecm9wZG93bihmaWVsZE1ldGFkYXRhSXRlbS5pZCk7XG5cbiAgICBjb25zdCBmaWx0ZXJUeXBlID0gZ2V0RmlsdGVyVHlwZUZyb21GaWVsZFR5cGUoZmllbGRNZXRhZGF0YUl0ZW0udHlwZSk7XG5cbiAgICBpZiAoZmlsdGVyVHlwZSA9PT0gJ1JFTEFUSU9OJyB8fCBmaWx0ZXJUeXBlID09PSAnU0VMRUNUJykge1xuICAgICAgc2V0SG90a2V5U2NvcGUoU2luZ2xlUmVjb3JkUGlja2VySG90a2V5U2NvcGUuU2luZ2xlUmVjb3JkUGlja2VyKTtcbiAgICB9XG5cbiAgICBjb25zdCBkZWZhdWx0T3BlcmFuZCA9IGdldFJlY29yZEZpbHRlck9wZXJhbmRzKHtcbiAgICAgIGZpbHRlclR5cGUsXG4gICAgfSlbMF07XG5cbiAgICBzZXRPYmplY3RGaWx0ZXJEcm9wZG93bkZpbHRlcklzU2VsZWN0ZWQodHJ1ZSk7XG5cbiAgICBjb25zdCBkdXBsaWNhdGVGaWx0ZXJJbkN1cnJlbnRSZWNvcmRGaWx0ZXJzID1cbiAgICAgIGZpbmREdXBsaWNhdGVSZWNvcmRGaWx0ZXJJbk5vbkFkdmFuY2VkUmVjb3JkRmlsdGVycyh7XG4gICAgICAgIHJlY29yZEZpbHRlcnM6IGN1cnJlbnRSZWNvcmRGaWx0ZXJzLFxuICAgICAgICBmaWVsZE1ldGFkYXRhSXRlbUlkOiBmaWVsZE1ldGFkYXRhSXRlbS5pZCxcbiAgICAgIH0pO1xuXG4gICAgY29uc3QgZmlsdGVySXNBbHJlYWR5SW5DdXJyZW50UmVjb3JkRmlsdGVycyA9IGlzRGVmaW5lZChcbiAgICAgIGR1cGxpY2F0ZUZpbHRlckluQ3VycmVudFJlY29yZEZpbHRlcnMsXG4gICAgKTtcblxuICAgIGlmIChmaWx0ZXJJc0FscmVhZHlJbkN1cnJlbnRSZWNvcmRGaWx0ZXJzKSB7XG4gICAgICBzZXRTZWxlY3RlZEZpbHRlcih7XG4gICAgICAgIC4uLmR1cGxpY2F0ZUZpbHRlckluQ3VycmVudFJlY29yZEZpbHRlcnMsXG4gICAgICB9KTtcblxuICAgICAgc2V0U2VsZWN0ZWRPcGVyYW5kSW5Ecm9wZG93bihcbiAgICAgICAgZHVwbGljYXRlRmlsdGVySW5DdXJyZW50UmVjb3JkRmlsdGVycy5vcGVyYW5kLFxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0U2VsZWN0ZWRPcGVyYW5kSW5Ecm9wZG93bihkZWZhdWx0T3BlcmFuZCk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHsgZ2V0SWNvbiB9ID0gdXNlSWNvbnMoKTtcblxuICBjb25zdCBJY29uID0gZ2V0SWNvbihmaWVsZE1ldGFkYXRhSXRlbVRvU2VsZWN0Lmljb24pO1xuXG4gIGNvbnN0IHNob3VsZFNob3dTdWJNZW51ID0gaXNDb21wb3NpdGVGaWVsZChmaWVsZE1ldGFkYXRhSXRlbVRvU2VsZWN0LnR5cGUpO1xuXG4gIGNvbnN0IGhhbmRsZUNsaWNrID0gKCkgPT4ge1xuICAgIHJlc2V0U2VsZWN0ZWRJdGVtKCk7XG5cbiAgICBjb25zdCBmaWx0ZXJUeXBlID0gZ2V0RmlsdGVyVHlwZUZyb21GaWVsZFR5cGUoXG4gICAgICBmaWVsZE1ldGFkYXRhSXRlbVRvU2VsZWN0LnR5cGUsXG4gICAgKTtcblxuICAgIGlmIChpc0NvbXBvc2l0ZUZpZWxkKGZpbHRlclR5cGUpKSB7XG4gICAgICBzZXRPYmplY3RGaWx0ZXJEcm9wZG93blN1Yk1lbnVGaWVsZFR5cGUoZmlsdGVyVHlwZSk7XG5cbiAgICAgIHNldEZpZWxkTWV0YWRhdGFJdGVtSWRVc2VkSW5Ecm9wZG93bihmaWVsZE1ldGFkYXRhSXRlbVRvU2VsZWN0LmlkKTtcbiAgICAgIHNldE9iamVjdEZpbHRlckRyb3Bkb3duSXNTZWxlY3RpbmdDb21wb3NpdGVGaWVsZCh0cnVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaGFuZGxlU2VsZWN0RmlsdGVyKGZpZWxkTWV0YWRhdGFJdGVtVG9TZWxlY3QpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxNZW51SXRlbVNlbGVjdFxuICAgICAgc2VsZWN0ZWQ9e2ZhbHNlfVxuICAgICAgaG92ZXJlZD17aXNTZWxlY3RlZEl0ZW19XG4gICAgICBvbkNsaWNrPXtoYW5kbGVDbGlja31cbiAgICAgIExlZnRJY29uPXtJY29ufVxuICAgICAgdGV4dD17ZmllbGRNZXRhZGF0YUl0ZW1Ub1NlbGVjdC5sYWJlbH1cbiAgICAgIGhhc1N1Yk1lbnU9e3Nob3VsZFNob3dTdWJNZW51fVxuICAgIC8+XG4gICk7XG59O1xuIl0sIm5hbWVzIjpbIk9CSkVDVF9GSUxURVJfRFJPUERPV05fSUQiLCJmaWVsZE1ldGFkYXRhSXRlbUlkVXNlZEluRHJvcGRvd25Db21wb25lbnRTdGF0ZSIsIm9iamVjdEZpbHRlckRyb3Bkb3duRmlsdGVySXNTZWxlY3RlZENvbXBvbmVudFN0YXRlIiwib2JqZWN0RmlsdGVyRHJvcGRvd25Jc1NlbGVjdGluZ0NvbXBvc2l0ZUZpZWxkQ29tcG9uZW50U3RhdGUiLCJvYmplY3RGaWx0ZXJEcm9wZG93blN1Yk1lbnVGaWVsZFR5cGVDb21wb25lbnRTdGF0ZSIsInNlbGVjdGVkT3BlcmFuZEluRHJvcGRvd25Db21wb25lbnRTdGF0ZSIsImdldEZpbHRlclR5cGVGcm9tRmllbGRUeXBlIiwic2VsZWN0ZWRGaWx0ZXJDb21wb25lbnRTdGF0ZSIsImlzQ29tcG9zaXRlRmllbGQiLCJjdXJyZW50UmVjb3JkRmlsdGVyc0NvbXBvbmVudFN0YXRlIiwiZmluZER1cGxpY2F0ZVJlY29yZEZpbHRlckluTm9uQWR2YW5jZWRSZWNvcmRGaWx0ZXJzIiwiZ2V0UmVjb3JkRmlsdGVyT3BlcmFuZHMiLCJTaW5nbGVSZWNvcmRQaWNrZXJIb3RrZXlTY29wZSIsInVzZVNlbGVjdGFibGVMaXN0IiwidXNlU2V0SG90a2V5U2NvcGUiLCJ1c2VSZWNvaWxDb21wb25lbnRTdGF0ZVYyIiwidXNlUmVjb2lsQ29tcG9uZW50VmFsdWVWMiIsInVzZVNldFJlY29pbENvbXBvbmVudFN0YXRlVjIiLCJ1c2VSZWNvaWxWYWx1ZSIsIk1lbnVJdGVtU2VsZWN0IiwidXNlSWNvbnMiLCJpc0RlZmluZWQiLCJPYmplY3RGaWx0ZXJEcm9wZG93bkZpbHRlclNlbGVjdE1lbnVJdGVtIiwiZmllbGRNZXRhZGF0YUl0ZW1Ub1NlbGVjdCIsInNldEZpZWxkTWV0YWRhdGFJdGVtSWRVc2VkSW5Ecm9wZG93biIsInNldE9iamVjdEZpbHRlckRyb3Bkb3duU3ViTWVudUZpZWxkVHlwZSIsInNldE9iamVjdEZpbHRlckRyb3Bkb3duSXNTZWxlY3RpbmdDb21wb3NpdGVGaWVsZCIsInNldE9iamVjdEZpbHRlckRyb3Bkb3duRmlsdGVySXNTZWxlY3RlZCIsImlzU2VsZWN0ZWRJdGVtSWRTZWxlY3RvciIsInJlc2V0U2VsZWN0ZWRJdGVtIiwiaXNTZWxlY3RlZEl0ZW0iLCJpZCIsInNldFNlbGVjdGVkT3BlcmFuZEluRHJvcGRvd24iLCJzZXRIb3RrZXlTY29wZSIsImN1cnJlbnRSZWNvcmRGaWx0ZXJzIiwic2V0U2VsZWN0ZWRGaWx0ZXIiLCJoYW5kbGVTZWxlY3RGaWx0ZXIiLCJmaWVsZE1ldGFkYXRhSXRlbSIsImZpbHRlclR5cGUiLCJ0eXBlIiwiU2luZ2xlUmVjb3JkUGlja2VyIiwiZGVmYXVsdE9wZXJhbmQiLCJkdXBsaWNhdGVGaWx0ZXJJbkN1cnJlbnRSZWNvcmRGaWx0ZXJzIiwicmVjb3JkRmlsdGVycyIsImZpZWxkTWV0YWRhdGFJdGVtSWQiLCJmaWx0ZXJJc0FscmVhZHlJbkN1cnJlbnRSZWNvcmRGaWx0ZXJzIiwib3BlcmFuZCIsImdldEljb24iLCJJY29uIiwiaWNvbiIsInNob3VsZFNob3dTdWJNZW51IiwiaGFuZGxlQ2xpY2siLCJzZWxlY3RlZCIsImhvdmVyZWQiLCJvbkNsaWNrIiwiTGVmdEljb24iLCJ0ZXh0IiwibGFiZWwiLCJoYXNTdWJNZW51Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUEsU0FBU0EseUJBQXlCLFFBQVEsMEVBQTBFO0FBQ3BILFNBQVNDLCtDQUErQyxRQUFRLGdHQUFnRztBQUNoSyxTQUFTQyxrREFBa0QsUUFBUSxtR0FBbUc7QUFFdEssU0FBU0MsMkRBQTJELFFBQVEsNEdBQTRHO0FBQ3hMLFNBQVNDLGtEQUFrRCxRQUFRLG1HQUFtRztBQUN0SyxTQUFTQyx1Q0FBdUMsUUFBUSx3RkFBd0Y7QUFHaEosU0FBU0MsMEJBQTBCLFFBQVEsc0VBQXNFO0FBQ2pILFNBQVNDLDRCQUE0QixRQUFRLDZFQUE2RTtBQUMxSCxTQUFTQyxnQkFBZ0IsUUFBUSxnRUFBZ0U7QUFDakcsU0FBU0Msa0NBQWtDLFFBQVEsMEVBQTBFO0FBQzdILFNBQVNDLG1EQUFtRCxRQUFRLDBGQUEwRjtBQUM5SixTQUFTQyx1QkFBdUIsUUFBUSw4REFBOEQ7QUFDdEcsU0FB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