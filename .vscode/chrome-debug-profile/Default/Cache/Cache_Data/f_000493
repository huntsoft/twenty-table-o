{"version":3,"sources":["../../../../react-style-object-to-css/lib/CSSProperty.js","../../../../react-style-object-to-css/lib/hyphenateStyleName.js","../../../../react-style-object-to-css/index.js","../../../../@air/react-drag-to-select/src/components/SelectionContainer.tsx","../../../../@air/react-drag-to-select/src/utils/boxes.ts","../../../../@air/react-drag-to-select/src/hooks/useSelectionContainer.tsx","../../../../@air/react-drag-to-select/src/hooks/useSelectionLogic.ts"],"sourcesContent":["'use strict';\n\n/**\n * CSS properties which accept numbers but are not in units of \"px\".\n */\nvar isUnitlessNumber = {\n  boxFlex: true,\n  boxFlexGroup: true,\n  columnCount: true,\n  flex: true,\n  flexGrow: true,\n  flexPositive: true,\n  flexShrink: true,\n  flexNegative: true,\n  fontWeight: true,\n  lineClamp: true,\n  lineHeight: true,\n  opacity: true,\n  order: true,\n  orphans: true,\n  widows: true,\n  zIndex: true,\n  zoom: true,\n\n  // SVG-related properties\n  fillOpacity: true,\n  strokeDashoffset: true,\n  strokeOpacity: true,\n  strokeWidth: true\n};\n\n/**\n * @param {string} prefix vendor-specific prefix, eg: Webkit\n * @param {string} key style name, eg: transitionDuration\n * @return {string} style name prefixed with `prefix`, properly camelCased, eg:\n * WebkitTransitionDuration\n */\nfunction prefixKey(prefix, key) {\n  return prefix + key.charAt(0).toUpperCase() + key.substring(1);\n}\n\n/**\n * Support style names that may come passed in prefixed by adding permutations\n * of vendor prefixes.\n */\nvar prefixes = ['Webkit', 'ms', 'Moz', 'O'];\n\n// Using Object.keys here, or else the vanilla for-in loop makes IE8 go into an\n// infinite loop, because it iterates over the newly added props too.\nObject.keys(isUnitlessNumber).forEach(function(prop) {\n  prefixes.forEach(function(prefix) {\n    isUnitlessNumber[prefixKey(prefix, prop)] = isUnitlessNumber[prop];\n  });\n});\n\n/**\n * Most style properties can be unset by doing .style[prop] = '' but IE8\n * doesn't like doing that with shorthand properties so for the properties that\n * IE8 breaks on, which are listed here, we instead unset each of the\n * individual properties. See http://bugs.jquery.com/ticket/12385.\n * The 4-value 'clock' properties like margin, padding, border-width seem to\n * behave without any problems. Curiously, list-style works too without any\n * special prodding.\n */\nvar shorthandPropertyExpansions = {\n  background: {\n    backgroundImage: true,\n    backgroundPosition: true,\n    backgroundRepeat: true,\n    backgroundColor: true\n  },\n  border: {\n    borderWidth: true,\n    borderStyle: true,\n    borderColor: true\n  },\n  borderBottom: {\n    borderBottomWidth: true,\n    borderBottomStyle: true,\n    borderBottomColor: true\n  },\n  borderLeft: {\n    borderLeftWidth: true,\n    borderLeftStyle: true,\n    borderLeftColor: true\n  },\n  borderRight: {\n    borderRightWidth: true,\n    borderRightStyle: true,\n    borderRightColor: true\n  },\n  borderTop: {\n    borderTopWidth: true,\n    borderTopStyle: true,\n    borderTopColor: true\n  },\n  font: {\n    fontStyle: true,\n    fontVariant: true,\n    fontWeight: true,\n    fontSize: true,\n    lineHeight: true,\n    fontFamily: true\n  }\n};\n\nvar CSSProperty = {\n  isUnitlessNumber: isUnitlessNumber,\n  shorthandPropertyExpansions: shorthandPropertyExpansions\n};\n\nmodule.exports = CSSProperty;\n","\"use strict\";\n\nvar msPattern = /^ms-/;\n\nvar _uppercasePattern = /([A-Z])/g;\n\n/**\n * Hyphenates a camelcased string, for example:\n *\n *   > hyphenate('backgroundColor')\n *   < \"background-color\"\n *\n * For CSS style names, use `hyphenateStyleName` instead which works properly\n * with all vendor prefixes, including `ms`.\n *\n * @param {string} string\n * @return {string}\n */\nfunction hyphenate(string) {\n  return string.replace(_uppercasePattern, '-$1').toLowerCase();\n}\n\n/**\n * Hyphenates a camelcased CSS property name, for example:\n *\n *   > hyphenateStyleName('backgroundColor')\n *   < \"background-color\"\n *   > hyphenateStyleName('MozTransition')\n *   < \"-moz-transition\"\n *   > hyphenateStyleName('msTransition')\n *   < \"-ms-transition\"\n *\n * As Modernizr suggests (http://modernizr.com/docs/#prefixed), an `ms` prefix\n * is converted to `-ms-`.\n *\n * @param {string} string\n * @return {string}\n */\nfunction hyphenateStyleName(string) {\n  return hyphenate(string).replace(msPattern, '-ms-');\n}\n\nmodule.exports = hyphenateStyleName;\n","'use strict';\n\nvar isUnitlessNumber = require('./lib/CSSProperty').isUnitlessNumber;\nvar hyphenateStyleName = require('./lib/hyphenateStyleName');\nvar isArray = Array.isArray;\nvar keys = Object.keys;\n\nvar counter = 1;\n// Follows syntax at https://developer.mozilla.org/en-US/docs/Web/CSS/content,\n// including multiple space separated values.\nvar unquotedContentValueRegex = /^(normal|none|(\\b(url\\([^)]*\\)|chapter_counter|attr\\([^)]*\\)|(no-)?(open|close)-quote|inherit)((\\b\\s*)|$|\\s+))+)$/;\n\nfunction buildRule(key, value) {\n  if (!isUnitlessNumber[key] && typeof value === 'number') {\n    value = '' + value + 'px';\n  }\n  else if (key === 'content' && !unquotedContentValueRegex.test(value)) {\n    value = \"'\" + value.replace(/'/g, \"\\\\'\") + \"'\";\n  }\n\n  return hyphenateStyleName(key) + ': ' + value + ';  ';\n}\n\nfunction styleToCssString(rules) {\n  var result = ''\n  if (!rules || keys(rules).length === 0) {\n    return result;\n  }\n  var styleKeys = keys(rules);\n  for (var j = 0, l = styleKeys.length; j < l; j++) {\n    var styleKey = styleKeys[j];\n    var value = rules[styleKey];\n\n    if (isArray(value)) {\n      for (var i = 0, len = value.length; i < len; i++) {\n        result += buildRule(styleKey, value[i]);\n      }\n    }\n    else {\n      result += buildRule(styleKey, value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = styleToCssString;\n","import React, { forwardRef, useEffect, useImperativeHandle, useRef, useState } from 'react';\nimport ReactDOM from 'react-dom';\nimport { SelectionContainerRef, SelectionBox } from '../utils/types';\n// @ts-ignore\nimport styleObjectToCSS from 'react-style-object-to-css';\n\nexport interface SelectionContainerProps extends React.HTMLAttributes<HTMLDivElement> {}\n\n/**\n * This is a component responsible for displaying mouse selection box\n */\nexport const SelectionContainer = forwardRef(({ style = {}, ...props }: SelectionContainerProps, ref) => {\n  const containerRef = useRef<HTMLDivElement | null>(null);\n  const selectionBoxRef = useRef<HTMLDivElement>(null);\n  const [, setForceUpdate] = useState(0);\n\n  useImperativeHandle(\n    ref,\n    (): SelectionContainerRef => ({\n      getBoundingClientRect: () => containerRef.current?.getBoundingClientRect(),\n      getParentBoundingClientRect: () => containerRef?.current?.parentElement?.getBoundingClientRect(),\n      drawSelectionBox: (box: SelectionBox) => {\n        requestAnimationFrame(() => {\n          if (selectionBoxRef.current) {\n            const styles: React.CSSProperties = {\n              border: '1px solid #4C85D8',\n              background: 'rgba(155, 193, 239, 0.4)',\n              position: 'absolute',\n              pointerEvents: 'none',\n              ...style,\n              top: box.top,\n              left: box.left,\n              width: box.width,\n              height: box.height,\n            };\n\n            selectionBoxRef.current.style.cssText = styleObjectToCSS(styles);\n          }\n        });\n      },\n      clearSelectionBox: () => {\n        requestAnimationFrame(() => {\n          if (selectionBoxRef.current) {\n            const styles: React.CSSProperties = {\n              top: 0,\n              left: 0,\n              width: 0,\n              height: 0,\n            };\n\n            selectionBoxRef.current.style.cssText = styleObjectToCSS(styles);\n          }\n        });\n      },\n    }),\n  );\n\n  useEffect(() => {\n    setForceUpdate((number) => number + 1);\n  }, []);\n\n  return (\n    <div ref={containerRef}>\n      {containerRef.current\n        ? ReactDOM.createPortal(<div ref={selectionBoxRef} {...props} />, containerRef.current)\n        : null}\n    </div>\n  );\n});\n","import { Box, Point } from './types';\n\n/** This method returns true if two boxes intersects\n * @param boxA\n * @param boxB\n */\nexport const boxesIntersect = (boxA: Box, boxB: Box) =>\n  boxA.left <= boxB.left + boxB.width &&\n  boxA.left + boxA.width >= boxB.left &&\n  boxA.top <= boxB.top + boxB.height &&\n  boxA.top + boxA.height >= boxB.top;\n\nexport const calculateSelectionBox = ({ startPoint, endPoint }: { startPoint: Point; endPoint: Point }): Box => ({\n  left: Math.min(startPoint.x, endPoint.x),\n  top: Math.min(startPoint.y, endPoint.y),\n  width: Math.abs(startPoint.x - endPoint.x),\n  height: Math.abs(startPoint.y - endPoint.y),\n});\n\nexport const calculateBoxArea = (box: Box) => box.width * box.height;\n","import React, { ReactElement, useCallback, useRef } from 'react';\nimport { SelectionContainer, SelectionContainerProps } from '../components/SelectionContainer';\nimport { SelectionContainerRef } from '../utils/types';\nimport { useSelectionLogic, UseSelectionLogicParams } from './useSelectionLogic';\n\nexport interface UseSelectionContainerResult {\n  /**\n   * method to cancel current selecting\n   */\n  cancelCurrentSelection: ReturnType<typeof useSelectionLogic>['cancelCurrentSelection'];\n  /**\n   * ReactNode which displays mouse selection. It should be rendered at the top of container of elements we want to select\n   */\n  DragSelection: () => ReactElement;\n}\n\nexport interface UseSelectionContainerParams<T extends HTMLElement>\n  extends Pick<\n    UseSelectionLogicParams<T>,\n    'onSelectionChange' | 'onSelectionEnd' | 'onSelectionStart' | 'isEnabled' | 'eventsElement' | 'shouldStartSelecting'\n  > {\n  /** These are props that get passed to the selection box component (where styling gets passed in) */\n  selectionProps?: SelectionContainerProps;\n}\n\n/**\n * Use this hook to enable mouse selection on a container.\n * To prevent interfering with drag-n-drop feature, add data-draggable='true' to draggable item. Selection won't fire when click happens on that element\n */\nexport function useSelectionContainer<T extends HTMLElement>(\n  props?: UseSelectionContainerParams<T>,\n): UseSelectionContainerResult {\n  const {\n    onSelectionChange,\n    onSelectionEnd,\n    onSelectionStart,\n    isEnabled = true,\n    selectionProps = {},\n    eventsElement,\n    shouldStartSelecting,\n  } = props || {};\n\n  const containerRef = useRef<SelectionContainerRef>(null);\n\n  const { cancelCurrentSelection } = useSelectionLogic({\n    containerRef,\n    onSelectionEnd,\n    onSelectionStart,\n    onSelectionChange,\n    isEnabled,\n    eventsElement,\n    shouldStartSelecting,\n  });\n\n  const DragSelection = useCallback(() => <SelectionContainer ref={containerRef} {...selectionProps} />, []);\n\n  return {\n    cancelCurrentSelection,\n    DragSelection,\n  };\n}\n","import { RefObject, useCallback, useEffect, useRef } from 'react';\nimport { SelectionContainerRef, OnSelectionChange, Point, SelectionBox, Box } from '../utils/types';\nimport { calculateBoxArea, calculateSelectionBox } from '../utils/boxes';\n\nexport interface UseSelectionLogicResult {\n  cancelCurrentSelection: () => void;\n}\n\nexport interface UseSelectionLogicParams<T extends HTMLElement> {\n  /** This callback will fire when the user starts selecting */\n  onSelectionStart?: (event: MouseEvent) => void;\n  /** This callback will fire when the user finishes selecting */\n  onSelectionEnd?: (event: MouseEvent) => void;\n  /** This callback will fire when the user's mouse changes position while selecting using requestAnimationFrame */\n  onSelectionChange?: OnSelectionChange;\n  /** This boolean enables selecting  */\n  isEnabled?: boolean;\n  /** This is an HTML element that the mouse events (mousedown, mouseup, mousemove) should be attached to. Defaults to the document.body */\n  eventsElement?: T | null;\n  /** This is the ref of the parent of the selection box  */\n  containerRef: RefObject<SelectionContainerRef>;\n  /**\n   * If supplied, this callback is fired on mousedown and can be used to prevent selection from starting.\n   * This is useful when you want to prevent certain areas of your application from being able to be selected.\n   * Returning true will enable selection and returning false will prevent selection from starting.\n   *\n   * @param {EventTarget | null} target - The element the mousedown event fired on when the user started selected\n   */\n  shouldStartSelecting?: (target: EventTarget | null) => boolean;\n}\n\n/**\n * This hook contains logic for selecting. It starts 'selection' on mousedown event and finishes it on mouseup event.\n * When mousemove event is detected and user is selecting, it calls onSelectionChange and containerRef.drawSelectionBox\n */\nexport function useSelectionLogic<T extends HTMLElement>({\n  containerRef,\n  onSelectionChange,\n  onSelectionStart,\n  onSelectionEnd,\n  isEnabled = true,\n  eventsElement,\n  shouldStartSelecting,\n}: UseSelectionLogicParams<T>): UseSelectionLogicResult {\n  const startPoint = useRef<null | Point>(null);\n  const endPoint = useRef<null | Point>(null);\n  const isSelecting = useRef(false);\n\n  // these are used in listeners attached to eventsElement. They are used as refs to ensure we always use the latest version\n  const currentSelectionChange = useRef(onSelectionChange);\n  const currentSelectionStart = useRef(onSelectionStart);\n  const currentSelectionEnd = useRef(onSelectionEnd);\n  const onChangeRefId = useRef<number | undefined>();\n  const isEnabledRef = useRef(isEnabled);\n\n  currentSelectionChange.current = useCallback(\n    (box: Box) => {\n      onChangeRefId.current = onSelectionChange\n        ? requestAnimationFrame(() => {\n            onSelectionChange(box);\n          })\n        : undefined;\n    },\n    [onSelectionChange],\n  );\n  currentSelectionStart.current = onSelectionStart;\n  currentSelectionEnd.current = onSelectionEnd;\n  isEnabledRef.current = isEnabled;\n\n  /**\n   * Method to cancel selecting and reset internal data\n   */\n  const cancelCurrentSelection = useCallback(() => {\n    startPoint.current = null;\n    endPoint.current = null;\n    isSelecting.current = false;\n    containerRef.current?.clearSelectionBox();\n    if (typeof onChangeRefId.current === 'number') {\n      cancelAnimationFrame(onChangeRefId.current);\n    }\n  }, [containerRef]);\n\n  /**\n   * method to calculate point from event in context of the whole screen\n   */\n  const getPointFromEvent = useCallback(\n    (event: MouseEvent, rect?: DOMRect): Point => {\n      if (!rect) {\n        rect = containerRef.current?.getParentBoundingClientRect();\n      }\n\n      return {\n        x: event.clientX - (typeof rect?.left === 'number' ? rect.left : 0),\n        y: event.clientY - (typeof rect?.top === 'number' ? rect.top : 0),\n      };\n    },\n    [containerRef],\n  );\n\n  /**\n   * Method called on mousemove event\n   */\n  const handleMouseMove = useCallback(\n    (event: MouseEvent, rect?: DOMRect) => {\n      if (startPoint.current && endPoint.current) {\n        if (!rect) {\n          return;\n        }\n\n        const newSelectionBox = calculateSelectionBox({\n          startPoint: startPoint.current,\n          endPoint: endPoint.current,\n        });\n\n        // calculate box in context of container to compare with items' coordinates\n        const boxInContainer: SelectionBox = {\n          ...newSelectionBox,\n          top: newSelectionBox.top + (rect?.top || 0),\n          left: newSelectionBox.left + (rect?.left || 0),\n        };\n\n        // we detect move only after some small movement\n        if (calculateBoxArea(newSelectionBox) > 10) {\n          if (!isSelecting.current) {\n            if (currentSelectionStart?.current) {\n              currentSelectionStart.current(event);\n            }\n            isSelecting.current = true;\n          }\n          containerRef.current?.drawSelectionBox(newSelectionBox);\n          currentSelectionChange.current?.(boxInContainer);\n        } else if (isSelecting.current) {\n          currentSelectionChange.current?.(boxInContainer);\n        }\n      } else {\n        cancelCurrentSelection();\n      }\n    },\n    [cancelCurrentSelection, containerRef],\n  );\n\n  const onMouseMove = useCallback(\n    (event: MouseEvent) => {\n      if (!startPoint.current) {\n        return;\n      }\n\n      const rect = containerRef.current?.getParentBoundingClientRect();\n      endPoint.current = getPointFromEvent(event, rect);\n      handleMouseMove(event, rect);\n    },\n    [handleMouseMove, getPointFromEvent, containerRef],\n  );\n\n  const onMouseUp = useCallback(\n    (event: MouseEvent) => {\n      /**\n       * handle only left button up event\n       */\n      if (event.button === 0) {\n        /**\n         * If the user just clicked down and up in the same place without dragging,\n         * we don't want to fire the onSelectionEnd event. We can do this\n         * by checking if endPoint.current exists.\n         */\n        if (endPoint.current) {\n          currentSelectionEnd.current?.(event);\n        }\n\n        cancelCurrentSelection();\n\n        document.body.style.removeProperty('user-select');\n        document.body.style.removeProperty('-webkit-user-select');\n\n        (eventsElement || document.body).removeEventListener('mousemove', onMouseMove);\n        window?.removeEventListener('mouseup', onMouseUp);\n      }\n    },\n    [eventsElement, cancelCurrentSelection, onMouseMove],\n  );\n\n  const onMouseDown = useCallback(\n    (e: MouseEvent) => {\n      // handle only left button click\n      if (e.button === 0 && isEnabledRef.current) {\n        if (typeof shouldStartSelecting === 'function' && !shouldStartSelecting(e.target)) {\n          return;\n        }\n\n        // disable text selection for all document\n        document.body.style.userSelect = 'none';\n        document.body.style.webkitUserSelect = 'none';\n        startPoint.current = getPointFromEvent(e);\n\n        (eventsElement || document.body).addEventListener('mousemove', onMouseMove);\n        window?.addEventListener('mouseup', onMouseUp);\n      }\n    },\n    [eventsElement, getPointFromEvent, onMouseMove, onMouseUp],\n  );\n\n  useEffect(() => {\n    /**\n     * On mount, add the mouse down listener to begin listening for dragging\n     */\n    (eventsElement || document.body).addEventListener('mousedown', onMouseDown);\n\n    /**\n     * On unmount, remove any listeners that we're applied.\n     */\n    return () => {\n      (eventsElement || document.body).removeEventListener('mousedown', onMouseDown);\n      (eventsElement || document.body).removeEventListener('mousemove', onMouseMove);\n      window.removeEventListener('mouseup', onMouseUp);\n    };\n  }, [eventsElement, onMouseDown, onMouseMove, onMouseUp]);\n\n  return {\n    cancelCurrentSelection,\n  };\n}\n"],"mappings":"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","names":["l","i","_excluded","SelectionContainer","forwardRef","ref","style","props","containerRef","useRef","selectionBoxRef","setForceUpdate","useState","useImperativeHandle","getBoundingClientRect","_containerRef$current","current","getParentBoundingClientRect","e","t","_containerRef$current2","_containerRef$current3","parentElement","drawSelectionBox","box","requestAnimationFrame","styles","_extends","border","background","position","pointerEvents","top","left","width","height","cssText","styleObjectToCSS","clearSelectionBox","useEffect","number","ReactDOM","createPortal","React","boxesIntersect","boxA","boxB","useSelectionContainer","onSelectionChange","onSelectionEnd","onSelectionStart","isEnabled","selectionProps","eventsElement","shouldStartSelecting","cancelCurrentSelection","startPoint","m","isSelecting","currentSelectionChange","currentSelectionEnd","onChangeRefId","isEnabledRef","useCallback","currentSelectionStart","endPoint","cancelAnimationFrame","getPointFromEvent","event","rect","_rect","_rect2","l","x","clientX","y","clientY","Math","min","abs","boxInContainer","newSelectionBox","onMouseMove","_containerRef$current4","handleMouseMove","_window","button","document","body","removeProperty","removeEventListener","window","onMouseUp","onMouseDown","_window2","target","userSelect","webkitUserSelect","addEventListener","DragSelection","createElement"]}