import { createHotContext as __vite__createHotContext } from "/@vite/client";import.meta.hot = __vite__createHotContext("/src/modules/spreadsheet-import/steps/components/ValidationStep/ValidationStep.tsx");if (!window.$RefreshReg$) throw new Error("React refresh preamble was not loaded. Something is wrong.");
const prevRefreshReg = window.$RefreshReg$;
const prevRefreshSig = window.$RefreshSig$;
window.$RefreshReg$ = RefreshRuntime.getRefreshReg("D:/twenty-table-o/packages/twenty-front/src/modules/spreadsheet-import/steps/components/ValidationStep/ValidationStep.tsx");
window.$RefreshSig$ = RefreshRuntime.createSignatureFunctionForTransform;

import * as RefreshRuntime from "/@react-refresh";

import { jsxDEV as _jsxDEV, Fragment as _Fragment } from "/@fs/D:/twenty-table-o/node_modules/.vite/packages/twenty-front/deps/@emotion_react_jsx-dev-runtime.js?v=226f7286";
var _s = $RefreshSig$();
import { Heading } from "/src/modules/spreadsheet-import/components/Heading.tsx";
import { SpreadsheetImportTable } from "/src/modules/spreadsheet-import/components/SpreadsheetImportTable.tsx";
import { StepNavigationButton } from "/src/modules/spreadsheet-import/components/StepNavigationButton.tsx";
import { useSpreadsheetImportInternal } from "/src/modules/spreadsheet-import/hooks/useSpreadsheetImportInternal.ts";
import { SpreadsheetImportStepType } from "/src/modules/spreadsheet-import/steps/types/SpreadsheetImportStepType.ts";
import { SpreadsheetColumnType } from "/src/modules/spreadsheet-import/types/SpreadsheetColumnType.ts";
import { addErrorsAndRunHooks } from "/src/modules/spreadsheet-import/utils/dataMutations.ts";
import { useDialogManager } from "/src/modules/ui/feedback/dialog-manager/hooks/useDialogManager.ts";
import { Modal } from "/src/modules/ui/layout/modal/components/Modal.tsx";
import styled from "/@fs/D:/twenty-table-o/node_modules/.vite/packages/twenty-front/deps/@emotion_styled.js?v=226f7286";
import { useLingui as $_useLingui } from "/@fs/D:/twenty-table-o/node_modules/.vite/packages/twenty-front/deps/@lingui_react.js?v=226f7286";
import { Trans as Trans_ } from "/@fs/D:/twenty-table-o/node_modules/.vite/packages/twenty-front/deps/@lingui_react.js?v=226f7286";
import __vite__cjsImport14_react from "/@fs/D:/twenty-table-o/node_modules/.vite/packages/twenty-front/deps/react.js?v=226f7286"; const useCallback = __vite__cjsImport14_react["useCallback"]; const useMemo = __vite__cjsImport14_react["useMemo"]; const useState = __vite__cjsImport14_react["useState"];
import { isDefined } from "/@fs/D:/twenty-table-o/packages/twenty-shared/utils/dist/twenty-shared-utils.esm.js";
import { Button, IconTrash, Toggle } from "/@fs/D:/twenty-table-o/packages/twenty-ui/src/index.ts";
import { generateColumns } from "/src/modules/spreadsheet-import/steps/components/ValidationStep/components/columns.tsx";
const StyledContent = styled(Modal.Content)`
  padding-left: ${({ theme })=>theme.spacing(6)};
  padding-right: ${({ theme })=>theme.spacing(6)};
`;
_c = StyledContent;
const StyledToolbar = styled.div`
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  margin-bottom: ${({ theme })=>theme.spacing(4)};
  margin-top: ${({ theme })=>theme.spacing(8)};
`;
_c1 = StyledToolbar;
const StyledErrorToggle = styled.div`
  align-items: center;
  display: flex;
  flex-direction: row;
`;
_c2 = StyledErrorToggle;
const StyledErrorToggleDescription = styled.span`
  color: ${({ theme })=>theme.font.color.primary};
  font-size: ${({ theme })=>theme.font.size.sm};
  font-weight: ${({ theme })=>theme.font.weight.regular};
  margin-left: ${({ theme })=>theme.spacing(2)};
`;
_c3 = StyledErrorToggleDescription;
const StyledScrollContainer = styled.div`
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  height: 0px;
  width: 100%;
`;
_c4 = StyledScrollContainer;
const StyledNoRowsContainer = styled.div`
  display: flex;
  grid-column: 1/-1;
  justify-content: center;
  margin-top: ${({ theme })=>theme.spacing(8)};
`;
export const ValidationStep = ({ initialData, importedColumns, file, setCurrentStepState, onBack })=>{
    _s();
    const { enqueueDialog } = useDialogManager();
    const { fields, onClose, onSubmit, rowHook, tableHook } = useSpreadsheetImportInternal();
    const [data, setData] = useState(useMemo(()=>addErrorsAndRunHooks(initialData, fields, rowHook, tableHook), // eslint-disable-next-line react-hooks/exhaustive-deps
    []));
    const [selectedRows, setSelectedRows] = useState(new Set());
    const [filterByErrors, setFilterByErrors] = useState(false);
    const [showUnmatchedColumns, setShowUnmatchedColumns] = useState(false);
    const updateData = useCallback((rows)=>{
        setData(addErrorsAndRunHooks(rows, fields, rowHook, tableHook));
    }, [
        setData,
        rowHook,
        tableHook,
        fields
    ]);
    const deleteSelectedRows = ()=>{
        if (selectedRows.size > 0) {
            const newData = data.filter((value)=>!selectedRows.has(value.__index));
            updateData(newData);
            setSelectedRows(new Set());
        }
    };
    const { i18n: $__i18n, _: $__ } = $_useLingui();
    const updateRow = useCallback((rows, changedData)=>{
        const changes = changedData?.indexes.reduce(// Todo: remove usage of react-data-grid
        (acc, index)=>{
            // when data is filtered val !== actual index in data
            const realIndex = data.findIndex((value)=>value.__index === rows[index].__index);
            acc[realIndex] = rows[index];
            return acc;
        }, {});
        const newData = Object.assign([], data, changes);
        updateData(newData);
    }, [
        data,
        updateData
    ]);
    const columns = useMemo(()=>generateColumns(fields).map((column)=>{
            const hasBeenImported = importedColumns.filter((importColumn)=>importColumn.type === SpreadsheetColumnType.matched && importColumn.value === column.key || importColumn.type === SpreadsheetColumnType.matchedSelect && importColumn.value === column.key || importColumn.type === SpreadsheetColumnType.matchedSelectOptions && importColumn.value === column.key || importColumn.type === SpreadsheetColumnType.matchedCheckbox && importColumn.value === column.key || column.key === 'select-row').length > 0;
            if (!hasBeenImported && !showUnmatchedColumns) return null;
            return column;
        }).filter(Boolean), [
        fields,
        importedColumns,
        showUnmatchedColumns
    ]);
    const tableData = useMemo(()=>{
        if (filterByErrors) {
            return data.filter((value)=>{
                if (isDefined(value?.__errors)) {
                    return Object.values(value.__errors)?.filter((err)=>err.level === 'error').length;
                }
                return false;
            });
        }
        return data;
    }, [
        data,
        filterByErrors
    ]);
    const rowKeyGetter = useCallback((row)=>row.__index, []);
    const submitData = async ()=>{
        const calculatedData = data.reduce((acc, value)=>{
            const { __index, __errors, ...values } = value;
            if (isDefined(__errors)) {
                for(const key in __errors){
                    if (__errors[key].level === 'error') {
                        acc.invalidStructuredRows.push(values);
                        return acc;
                    }
                }
            }
            acc.validStructuredRows.push(values);
            return acc;
        }, {
            validStructuredRows: [],
            invalidStructuredRows: [],
            allStructuredRows: data
        });
        setCurrentStepState({
            type: SpreadsheetImportStepType.loading
        });
        await onSubmit(calculatedData, file);
        onClose();
    };
    const onContinue = ()=>{
        const invalidData = data.find((value)=>{
            if (isDefined(value?.__errors)) {
                return !!Object.values(value.__errors)?.filter((err)=>err.level === 'error').length;
            }
            return false;
        });
        if (!invalidData) {
            submitData();
        } else {
            enqueueDialog({
                title: $__i18n._({
                    id: "SNdnlf",
                    message: "Finish flow with errors"
                }),
                message: $__i18n._({
                    id: "luL9RX",
                    message: "There are still some rows that contain errors. Rows with errors will be ignored when submitting."
                }),
                buttons: [
                    {
                        title: $__i18n._({
                            id: "dEgA5A",
                            message: "Cancel"
                        })
                    },
                    {
                        title: $__i18n._({
                            id: "hQRttt",
                            message: "Submit"
                        }),
                        variant: 'primary',
                        onClick: submitData,
                        role: 'confirm'
                    }
                ]
            });
        }
    };
    return /*#__PURE__*/ _jsxDEV(_Fragment, {
        children: [
            /*#__PURE__*/ _jsxDEV(StyledContent, {
                children: [
                    /*#__PURE__*/ _jsxDEV(Heading, {
                        title: $__i18n._({
                            id: "BohSvm",
                            message: "Review your import"
                        }),
                        description: $__i18n._({
                            id: "w5Stxm",
                            message: "Correct the issues and fill the missing data."
                        })
                    }, void 0, false, {
                        fileName: "D:/twenty-table-o/packages/twenty-front/src/modules/spreadsheet-import/steps/components/ValidationStep/ValidationStep.tsx",
                        lineNumber: 257,
                        columnNumber: 9
                    }, this),
                    /*#__PURE__*/ _jsxDEV(StyledToolbar, {
                        children: [
                            /*#__PURE__*/ _jsxDEV(StyledErrorToggle, {
                                children: [
                                    /*#__PURE__*/ _jsxDEV(Toggle, {
                                        value: filterByErrors,
                                        onChange: ()=>setFilterByErrors(!filterByErrors)
                                    }, void 0, false, {
                                        fileName: "D:/twenty-table-o/packages/twenty-front/src/modules/spreadsheet-import/steps/components/ValidationStep/ValidationStep.tsx",
                                        lineNumber: 263,
                                        columnNumber: 13
                                    }, this),
                                    /*#__PURE__*/ _jsxDEV(StyledErrorToggleDescription, {
                                        children: /*#__PURE__*/ _jsxDEV(Trans_, {
                                            message: "Show only rows with errors",
                                            id: "qi+g0a"
                                        }, void 0, false, {
                                            fileName: "D:/twenty-table-o/packages/twenty-front/src/modules/spreadsheet-import/steps/components/ValidationStep/ValidationStep.tsx",
                                            lineNumber: 268,
                                            columnNumber: 15
                                        }, this)
                                    }, void 0, false, {
                                        fileName: "D:/twenty-table-o/packages/twenty-front/src/modules/spreadsheet-import/steps/components/ValidationStep/ValidationStep.tsx",
                                        lineNumber: 267,
                                        columnNumber: 13
                                    }, this)
                                ]
                            }, void 0, true, {
                                fileName: "D:/twenty-table-o/packages/twenty-front/src/modules/spreadsheet-import/steps/components/ValidationStep/ValidationStep.tsx",
                                lineNumber: 262,
                                columnNumber: 11
                            }, this),
                            /*#__PURE__*/ _jsxDEV(StyledErrorToggle, {
                                children: [
                                    /*#__PURE__*/ _jsxDEV(Toggle, {
                                        value: showUnmatchedColumns,
                                        onChange: ()=>setShowUnmatchedColumns(!showUnmatchedColumns)
                                    }, void 0, false, {
                                        fileName: "D:/twenty-table-o/packages/twenty-front/src/modules/spreadsheet-import/steps/components/ValidationStep/ValidationStep.tsx",
                                        lineNumber: 272,
                                        columnNumber: 13
                                    }, this),
                                    /*#__PURE__*/ _jsxDEV(StyledErrorToggleDescription, {
                                        children: /*#__PURE__*/ _jsxDEV(Trans_, {
                                            message: "Show unmatched columns",
                                            id: "MHlGJL"
                                        }, void 0, false, {
                                            fileName: "D:/twenty-table-o/packages/twenty-front/src/modules/spreadsheet-import/steps/components/ValidationStep/ValidationStep.tsx",
                                            lineNumber: 277,
                                            columnNumber: 15
                                        }, this)
                                    }, void 0, false, {
                                        fileName: "D:/twenty-table-o/packages/twenty-front/src/modules/spreadsheet-import/steps/components/ValidationStep/ValidationStep.tsx",
                                        lineNumber: 276,
                                        columnNumber: 13
                                    }, this)
                                ]
                            }, void 0, true, {
                                fileName: "D:/twenty-table-o/packages/twenty-front/src/modules/spreadsheet-import/steps/components/ValidationStep/ValidationStep.tsx",
                                lineNumber: 271,
                                columnNumber: 11
                            }, this),
                            /*#__PURE__*/ _jsxDEV(Button, {
                                Icon: IconTrash,
                                title: $__i18n._({
                                    id: "t/YqKh",
                                    message: "Remove"
                                }),
                                accent: "danger",
                                onClick: deleteSelectedRows,
                                disabled: selectedRows.size === 0
                            }, void 0, false, {
                                fileName: "D:/twenty-table-o/packages/twenty-front/src/modules/spreadsheet-import/steps/components/ValidationStep/ValidationStep.tsx",
                                lineNumber: 280,
                                columnNumber: 11
                            }, this)
                        ]
                    }, void 0, true, {
                        fileName: "D:/twenty-table-o/packages/twenty-front/src/modules/spreadsheet-import/steps/components/ValidationStep/ValidationStep.tsx",
                        lineNumber: 261,
                        columnNumber: 9
                    }, this),
                    /*#__PURE__*/ _jsxDEV(StyledScrollContainer, {
                        children: /*#__PURE__*/ _jsxDEV(SpreadsheetImportTable, {
                            rowKeyGetter: rowKeyGetter,
                            rows: tableData,
                            onRowsChange: updateRow,
                            columns: columns,
                            selectedRows: selectedRows,
                            onSelectedRowsChange: setSelectedRows,
                            components: {
                                noRowsFallback: /*#__PURE__*/ _jsxDEV(StyledNoRowsContainer, {
                                    children: filterByErrors ? $__i18n._({
                                        id: "pxvJ9B",
                                        message: "No data containing errors"
                                    }) : $__i18n._({
                                        id: "dihZwh",
                                        message: "No data found"
                                    })
                                }, void 0, false, {
                                    fileName: "D:/twenty-table-o/packages/twenty-front/src/modules/spreadsheet-import/steps/components/ValidationStep/ValidationStep.tsx",
                                    lineNumber: 298,
                                    columnNumber: 17
                                }, void 0)
                            }
                        }, void 0, false, {
                            fileName: "D:/twenty-table-o/packages/twenty-front/src/modules/spreadsheet-import/steps/components/ValidationStep/ValidationStep.tsx",
                            lineNumber: 289,
                            columnNumber: 11
                        }, this)
                    }, void 0, false, {
                        fileName: "D:/twenty-table-o/packages/twenty-front/src/modules/spreadsheet-import/steps/components/ValidationStep/ValidationStep.tsx",
                        lineNumber: 288,
                        columnNumber: 9
                    }, this)
                ]
            }, void 0, true, {
                fileName: "D:/twenty-table-o/packages/twenty-front/src/modules/spreadsheet-import/steps/components/ValidationStep/ValidationStep.tsx",
                lineNumber: 256,
                columnNumber: 7
            }, this),
            /*#__PURE__*/ _jsxDEV(StepNavigationButton, {
                onClick: onContinue,
                onBack: onBack,
                title: $__i18n._({
                    id: "7VpPHA",
                    message: "Confirm"
                })
            }, void 0, false, {
                fileName: "D:/twenty-table-o/packages/twenty-front/src/modules/spreadsheet-import/steps/components/ValidationStep/ValidationStep.tsx",
                lineNumber: 308,
                columnNumber: 7
            }, this)
        ]
    }, void 0, true);
};
_s(ValidationStep, "IrXTB+U7oFKsv5wITg/3gmKbBQc=", false, function() {
    return [
        useDialogManager,
        useSpreadsheetImportInternal
    ];
});
_c5 = ValidationStep;
var _c, _c1, _c2, _c3, _c4, _c5;
$RefreshReg$(_c, "StyledContent");
$RefreshReg$(_c1, "StyledToolbar");
$RefreshReg$(_c2, "StyledErrorToggle");
$RefreshReg$(_c3, "StyledErrorToggleDescription");
$RefreshReg$(_c4, "StyledScrollContainer");
$RefreshReg$(_c5, "ValidationStep");


window.$RefreshReg$ = prevRefreshReg;
window.$RefreshSig$ = prevRefreshSig;

RefreshRuntime.__hmr_import(import.meta.url).then((currentExports) => {
  RefreshRuntime.registerExportsForReactRefresh("D:/twenty-table-o/packages/twenty-front/src/modules/spreadsheet-import/steps/components/ValidationStep/ValidationStep.tsx", currentExports);
  import.meta.hot.accept((nextExports) => {
    if (!nextExports) return;
    const invalidateMessage = RefreshRuntime.validateRefreshBoundaryAndEnqueueUpdate("D:/twenty-table-o/packages/twenty-front/src/modules/spreadsheet-import/steps/components/ValidationStep/ValidationStep.tsx", currentExports, nextExports);
    if (invalidateMessage) import.meta.hot.invalidate(invalidateMessage);
  });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlZhbGlkYXRpb25TdGVwLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBIZWFkaW5nIH0gZnJvbSAnQC9zcHJlYWRzaGVldC1pbXBvcnQvY29tcG9uZW50cy9IZWFkaW5nJztcbmltcG9ydCB7IFNwcmVhZHNoZWV0SW1wb3J0VGFibGUgfSBmcm9tICdAL3NwcmVhZHNoZWV0LWltcG9ydC9jb21wb25lbnRzL1NwcmVhZHNoZWV0SW1wb3J0VGFibGUnO1xuaW1wb3J0IHsgU3RlcE5hdmlnYXRpb25CdXR0b24gfSBmcm9tICdAL3NwcmVhZHNoZWV0LWltcG9ydC9jb21wb25lbnRzL1N0ZXBOYXZpZ2F0aW9uQnV0dG9uJztcbmltcG9ydCB7IHVzZVNwcmVhZHNoZWV0SW1wb3J0SW50ZXJuYWwgfSBmcm9tICdAL3NwcmVhZHNoZWV0LWltcG9ydC9ob29rcy91c2VTcHJlYWRzaGVldEltcG9ydEludGVybmFsJztcbmltcG9ydCB7IFNwcmVhZHNoZWV0SW1wb3J0U3RlcCB9IGZyb20gJ0Avc3ByZWFkc2hlZXQtaW1wb3J0L3N0ZXBzL3R5cGVzL1NwcmVhZHNoZWV0SW1wb3J0U3RlcCc7XG5pbXBvcnQgeyBTcHJlYWRzaGVldEltcG9ydFN0ZXBUeXBlIH0gZnJvbSAnQC9zcHJlYWRzaGVldC1pbXBvcnQvc3RlcHMvdHlwZXMvU3ByZWFkc2hlZXRJbXBvcnRTdGVwVHlwZSc7XG5pbXBvcnQge1xuICBJbXBvcnRlZFN0cnVjdHVyZWRSb3csXG4gIFNwcmVhZHNoZWV0SW1wb3J0SW1wb3J0VmFsaWRhdGlvblJlc3VsdCxcbn0gZnJvbSAnQC9zcHJlYWRzaGVldC1pbXBvcnQvdHlwZXMnO1xuaW1wb3J0IHsgU3ByZWFkc2hlZXRDb2x1bW5zIH0gZnJvbSAnQC9zcHJlYWRzaGVldC1pbXBvcnQvdHlwZXMvU3ByZWFkc2hlZXRDb2x1bW5zJztcbmltcG9ydCB7IFNwcmVhZHNoZWV0Q29sdW1uVHlwZSB9IGZyb20gJ0Avc3ByZWFkc2hlZXQtaW1wb3J0L3R5cGVzL1NwcmVhZHNoZWV0Q29sdW1uVHlwZSc7XG5pbXBvcnQgeyBhZGRFcnJvcnNBbmRSdW5Ib29rcyB9IGZyb20gJ0Avc3ByZWFkc2hlZXQtaW1wb3J0L3V0aWxzL2RhdGFNdXRhdGlvbnMnO1xuaW1wb3J0IHsgdXNlRGlhbG9nTWFuYWdlciB9IGZyb20gJ0AvdWkvZmVlZGJhY2svZGlhbG9nLW1hbmFnZXIvaG9va3MvdXNlRGlhbG9nTWFuYWdlcic7XG5pbXBvcnQgeyBNb2RhbCB9IGZyb20gJ0AvdWkvbGF5b3V0L21vZGFsL2NvbXBvbmVudHMvTW9kYWwnO1xuaW1wb3J0IHN0eWxlZCBmcm9tICdAZW1vdGlvbi9zdHlsZWQnO1xuaW1wb3J0IHsgVHJhbnMsIHVzZUxpbmd1aSB9IGZyb20gJ0BsaW5ndWkvcmVhY3QvbWFjcm8nO1xuaW1wb3J0IHtcbiAgRGlzcGF0Y2gsXG4gIFNldFN0YXRlQWN0aW9uLFxuICB1c2VDYWxsYmFjayxcbiAgdXNlTWVtbyxcbiAgdXNlU3RhdGUsXG59IGZyb20gJ3JlYWN0Jztcbi8vIEB0cy1leHBlY3QtZXJyb3IgVG9kbzogcmVtb3ZlIHVzYWdlIG9mIHJlYWN0LWRhdGEtZ3JpZGBcbmltcG9ydCB7IFJvd3NDaGFuZ2VEYXRhIH0gZnJvbSAncmVhY3QtZGF0YS1ncmlkJztcbmltcG9ydCB7IGlzRGVmaW5lZCB9IGZyb20gJ3R3ZW50eS1zaGFyZWQvdXRpbHMnO1xuaW1wb3J0IHsgQnV0dG9uLCBJY29uVHJhc2gsIFRvZ2dsZSB9IGZyb20gJ3R3ZW50eS11aSc7XG5pbXBvcnQgeyBnZW5lcmF0ZUNvbHVtbnMgfSBmcm9tICcuL2NvbXBvbmVudHMvY29sdW1ucyc7XG5pbXBvcnQgeyBJbXBvcnRlZFN0cnVjdHVyZWRSb3dNZXRhZGF0YSB9IGZyb20gJy4vdHlwZXMnO1xuXG5jb25zdCBTdHlsZWRDb250ZW50ID0gc3R5bGVkKE1vZGFsLkNvbnRlbnQpYFxuICBwYWRkaW5nLWxlZnQ6ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUuc3BhY2luZyg2KX07XG4gIHBhZGRpbmctcmlnaHQ6ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUuc3BhY2luZyg2KX07XG5gO1xuXG5jb25zdCBTdHlsZWRUb29sYmFyID0gc3R5bGVkLmRpdmBcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IHJvdztcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICBtYXJnaW4tYm90dG9tOiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLnNwYWNpbmcoNCl9O1xuICBtYXJnaW4tdG9wOiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLnNwYWNpbmcoOCl9O1xuYDtcblxuY29uc3QgU3R5bGVkRXJyb3JUb2dnbGUgPSBzdHlsZWQuZGl2YFxuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogcm93O1xuYDtcblxuY29uc3QgU3R5bGVkRXJyb3JUb2dnbGVEZXNjcmlwdGlvbiA9IHN0eWxlZC5zcGFuYFxuICBjb2xvcjogJHsoeyB0aGVtZSB9KSA9PiB0aGVtZS5mb250LmNvbG9yLnByaW1hcnl9O1xuICBmb250LXNpemU6ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUuZm9udC5zaXplLnNtfTtcbiAgZm9udC13ZWlnaHQ6ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUuZm9udC53ZWlnaHQucmVndWxhcn07XG4gIG1hcmdpbi1sZWZ0OiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLnNwYWNpbmcoMil9O1xuYDtcblxuY29uc3QgU3R5bGVkU2Nyb2xsQ29udGFpbmVyID0gc3R5bGVkLmRpdmBcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgZmxleC1ncm93OiAxO1xuICBoZWlnaHQ6IDBweDtcbiAgd2lkdGg6IDEwMCU7XG5gO1xuXG5jb25zdCBTdHlsZWROb1Jvd3NDb250YWluZXIgPSBzdHlsZWQuZGl2YFxuICBkaXNwbGF5OiBmbGV4O1xuICBncmlkLWNvbHVtbjogMS8tMTtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIG1hcmdpbi10b3A6ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUuc3BhY2luZyg4KX07XG5gO1xuXG50eXBlIFZhbGlkYXRpb25TdGVwUHJvcHM8VCBleHRlbmRzIHN0cmluZz4gPSB7XG4gIGluaXRpYWxEYXRhOiBJbXBvcnRlZFN0cnVjdHVyZWRSb3c8VD5bXTtcbiAgaW1wb3J0ZWRDb2x1bW5zOiBTcHJlYWRzaGVldENvbHVtbnM8c3RyaW5nPjtcbiAgZmlsZTogRmlsZTtcbiAgb25CYWNrOiAoKSA9PiB2b2lkO1xuICBzZXRDdXJyZW50U3RlcFN0YXRlOiBEaXNwYXRjaDxTZXRTdGF0ZUFjdGlvbjxTcHJlYWRzaGVldEltcG9ydFN0ZXA+Pjtcbn07XG5cbmV4cG9ydCBjb25zdCBWYWxpZGF0aW9uU3RlcCA9IDxUIGV4dGVuZHMgc3RyaW5nPih7XG4gIGluaXRpYWxEYXRhLFxuICBpbXBvcnRlZENvbHVtbnMsXG4gIGZpbGUsXG4gIHNldEN1cnJlbnRTdGVwU3RhdGUsXG4gIG9uQmFjayxcbn06IFZhbGlkYXRpb25TdGVwUHJvcHM8VD4pID0+IHtcbiAgY29uc3QgeyBlbnF1ZXVlRGlhbG9nIH0gPSB1c2VEaWFsb2dNYW5hZ2VyKCk7XG4gIGNvbnN0IHsgZmllbGRzLCBvbkNsb3NlLCBvblN1Ym1pdCwgcm93SG9vaywgdGFibGVIb29rIH0gPVxuICAgIHVzZVNwcmVhZHNoZWV0SW1wb3J0SW50ZXJuYWw8VD4oKTtcblxuICBjb25zdCBbZGF0YSwgc2V0RGF0YV0gPSB1c2VTdGF0ZTxcbiAgICAoSW1wb3J0ZWRTdHJ1Y3R1cmVkUm93PFQ+ICYgSW1wb3J0ZWRTdHJ1Y3R1cmVkUm93TWV0YWRhdGEpW11cbiAgPihcbiAgICB1c2VNZW1vKFxuICAgICAgKCkgPT4gYWRkRXJyb3JzQW5kUnVuSG9va3M8VD4oaW5pdGlhbERhdGEsIGZpZWxkcywgcm93SG9vaywgdGFibGVIb29rKSxcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgICAgIFtdLFxuICAgICksXG4gICk7XG4gIGNvbnN0IFtzZWxlY3RlZFJvd3MsIHNldFNlbGVjdGVkUm93c10gPSB1c2VTdGF0ZTxcbiAgICBSZWFkb25seVNldDxudW1iZXIgfCBzdHJpbmc+XG4gID4obmV3IFNldCgpKTtcbiAgY29uc3QgW2ZpbHRlckJ5RXJyb3JzLCBzZXRGaWx0ZXJCeUVycm9yc10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzaG93VW5tYXRjaGVkQ29sdW1ucywgc2V0U2hvd1VubWF0Y2hlZENvbHVtbnNdID0gdXNlU3RhdGUoZmFsc2UpO1xuXG4gIGNvbnN0IHVwZGF0ZURhdGEgPSB1c2VDYWxsYmFjayhcbiAgICAocm93czogdHlwZW9mIGRhdGEpID0+IHtcbiAgICAgIHNldERhdGEoYWRkRXJyb3JzQW5kUnVuSG9va3M8VD4ocm93cywgZmllbGRzLCByb3dIb29rLCB0YWJsZUhvb2spKTtcbiAgICB9LFxuICAgIFtzZXREYXRhLCByb3dIb29rLCB0YWJsZUhvb2ssIGZpZWxkc10sXG4gICk7XG5cbiAgY29uc3QgZGVsZXRlU2VsZWN0ZWRSb3dzID0gKCkgPT4ge1xuICAgIGlmIChzZWxlY3RlZFJvd3Muc2l6ZSA+IDApIHtcbiAgICAgIGNvbnN0IG5ld0RhdGEgPSBkYXRhLmZpbHRlcigodmFsdWUpID0+ICFzZWxlY3RlZFJvd3MuaGFzKHZhbHVlLl9faW5kZXgpKTtcbiAgICAgIHVwZGF0ZURhdGEobmV3RGF0YSk7XG4gICAgICBzZXRTZWxlY3RlZFJvd3MobmV3IFNldCgpKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgeyB0IH0gPSB1c2VMaW5ndWkoKTtcblxuICBjb25zdCB1cGRhdGVSb3cgPSB1c2VDYWxsYmFjayhcbiAgICAoXG4gICAgICByb3dzOiB0eXBlb2YgZGF0YSxcbiAgICAgIGNoYW5nZWREYXRhPzogUm93c0NoYW5nZURhdGE8KHR5cGVvZiBkYXRhKVtudW1iZXJdPixcbiAgICApID0+IHtcbiAgICAgIGNvbnN0IGNoYW5nZXMgPSBjaGFuZ2VkRGF0YT8uaW5kZXhlcy5yZWR1Y2UoXG4gICAgICAgIC8vIFRvZG86IHJlbW92ZSB1c2FnZSBvZiByZWFjdC1kYXRhLWdyaWRcbiAgICAgICAgKGFjYzogYW55LCBpbmRleDogYW55KSA9PiB7XG4gICAgICAgICAgLy8gd2hlbiBkYXRhIGlzIGZpbHRlcmVkIHZhbCAhPT0gYWN0dWFsIGluZGV4IGluIGRhdGFcbiAgICAgICAgICBjb25zdCByZWFsSW5kZXggPSBkYXRhLmZpbmRJbmRleChcbiAgICAgICAgICAgICh2YWx1ZSkgPT4gdmFsdWUuX19pbmRleCA9PT0gcm93c1tpbmRleF0uX19pbmRleCxcbiAgICAgICAgICApO1xuICAgICAgICAgIGFjY1tyZWFsSW5kZXhdID0gcm93c1tpbmRleF07XG4gICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgfSxcbiAgICAgICAge30gYXMgUmVjb3JkPG51bWJlciwgKHR5cGVvZiBkYXRhKVtudW1iZXJdPixcbiAgICAgICk7XG4gICAgICBjb25zdCBuZXdEYXRhID0gT2JqZWN0LmFzc2lnbihbXSwgZGF0YSwgY2hhbmdlcyk7XG4gICAgICB1cGRhdGVEYXRhKG5ld0RhdGEpO1xuICAgIH0sXG4gICAgW2RhdGEsIHVwZGF0ZURhdGFdLFxuICApO1xuXG4gIGNvbnN0IGNvbHVtbnMgPSB1c2VNZW1vKFxuICAgICgpID0+XG4gICAgICBnZW5lcmF0ZUNvbHVtbnMoZmllbGRzKVxuICAgICAgICAubWFwKChjb2x1bW4pID0+IHtcbiAgICAgICAgICBjb25zdCBoYXNCZWVuSW1wb3J0ZWQgPVxuICAgICAgICAgICAgaW1wb3J0ZWRDb2x1bW5zLmZpbHRlcihcbiAgICAgICAgICAgICAgKGltcG9ydENvbHVtbikgPT5cbiAgICAgICAgICAgICAgICAoaW1wb3J0Q29sdW1uLnR5cGUgPT09IFNwcmVhZHNoZWV0Q29sdW1uVHlwZS5tYXRjaGVkICYmXG4gICAgICAgICAgICAgICAgICBpbXBvcnRDb2x1bW4udmFsdWUgPT09IGNvbHVtbi5rZXkpIHx8XG4gICAgICAgICAgICAgICAgKGltcG9ydENvbHVtbi50eXBlID09PSBTcHJlYWRzaGVldENvbHVtblR5cGUubWF0Y2hlZFNlbGVjdCAmJlxuICAgICAgICAgICAgICAgICAgaW1wb3J0Q29sdW1uLnZhbHVlID09PSBjb2x1bW4ua2V5KSB8fFxuICAgICAgICAgICAgICAgIChpbXBvcnRDb2x1bW4udHlwZSA9PT1cbiAgICAgICAgICAgICAgICAgIFNwcmVhZHNoZWV0Q29sdW1uVHlwZS5tYXRjaGVkU2VsZWN0T3B0aW9ucyAmJlxuICAgICAgICAgICAgICAgICAgaW1wb3J0Q29sdW1uLnZhbHVlID09PSBjb2x1bW4ua2V5KSB8fFxuICAgICAgICAgICAgICAgIChpbXBvcnRDb2x1bW4udHlwZSA9PT0gU3ByZWFkc2hlZXRDb2x1bW5UeXBlLm1hdGNoZWRDaGVja2JveCAmJlxuICAgICAgICAgICAgICAgICAgaW1wb3J0Q29sdW1uLnZhbHVlID09PSBjb2x1bW4ua2V5KSB8fFxuICAgICAgICAgICAgICAgIGNvbHVtbi5rZXkgPT09ICdzZWxlY3Qtcm93JyxcbiAgICAgICAgICAgICkubGVuZ3RoID4gMDtcblxuICAgICAgICAgIGlmICghaGFzQmVlbkltcG9ydGVkICYmICFzaG93VW5tYXRjaGVkQ29sdW1ucykgcmV0dXJuIG51bGw7XG4gICAgICAgICAgcmV0dXJuIGNvbHVtbjtcbiAgICAgICAgfSlcbiAgICAgICAgLmZpbHRlcihCb29sZWFuKSxcbiAgICBbZmllbGRzLCBpbXBvcnRlZENvbHVtbnMsIHNob3dVbm1hdGNoZWRDb2x1bW5zXSxcbiAgKTtcblxuICBjb25zdCB0YWJsZURhdGEgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBpZiAoZmlsdGVyQnlFcnJvcnMpIHtcbiAgICAgIHJldHVybiBkYXRhLmZpbHRlcigodmFsdWUpID0+IHtcbiAgICAgICAgaWYgKGlzRGVmaW5lZCh2YWx1ZT8uX19lcnJvcnMpKSB7XG4gICAgICAgICAgcmV0dXJuIE9iamVjdC52YWx1ZXModmFsdWUuX19lcnJvcnMpPy5maWx0ZXIoXG4gICAgICAgICAgICAoZXJyKSA9PiBlcnIubGV2ZWwgPT09ICdlcnJvcicsXG4gICAgICAgICAgKS5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBkYXRhO1xuICB9LCBbZGF0YSwgZmlsdGVyQnlFcnJvcnNdKTtcblxuICBjb25zdCByb3dLZXlHZXR0ZXIgPSB1c2VDYWxsYmFjayhcbiAgICAocm93OiBJbXBvcnRlZFN0cnVjdHVyZWRSb3c8VD4gJiBJbXBvcnRlZFN0cnVjdHVyZWRSb3dNZXRhZGF0YSkgPT5cbiAgICAgIHJvdy5fX2luZGV4LFxuICAgIFtdLFxuICApO1xuXG4gIGNvbnN0IHN1Ym1pdERhdGEgPSBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgY2FsY3VsYXRlZERhdGEgPSBkYXRhLnJlZHVjZShcbiAgICAgIChhY2MsIHZhbHVlKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgX19pbmRleCwgX19lcnJvcnMsIC4uLnZhbHVlcyB9ID0gdmFsdWU7XG4gICAgICAgIGlmIChpc0RlZmluZWQoX19lcnJvcnMpKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gX19lcnJvcnMpIHtcbiAgICAgICAgICAgIGlmIChfX2Vycm9yc1trZXldLmxldmVsID09PSAnZXJyb3InKSB7XG4gICAgICAgICAgICAgIGFjYy5pbnZhbGlkU3RydWN0dXJlZFJvd3MucHVzaChcbiAgICAgICAgICAgICAgICB2YWx1ZXMgYXMgdW5rbm93biBhcyBJbXBvcnRlZFN0cnVjdHVyZWRSb3c8VD4sXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGFjYy52YWxpZFN0cnVjdHVyZWRSb3dzLnB1c2goXG4gICAgICAgICAgdmFsdWVzIGFzIHVua25vd24gYXMgSW1wb3J0ZWRTdHJ1Y3R1cmVkUm93PFQ+LFxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgdmFsaWRTdHJ1Y3R1cmVkUm93czogW10gYXMgSW1wb3J0ZWRTdHJ1Y3R1cmVkUm93PFQ+W10sXG4gICAgICAgIGludmFsaWRTdHJ1Y3R1cmVkUm93czogW10gYXMgSW1wb3J0ZWRTdHJ1Y3R1cmVkUm93PFQ+W10sXG4gICAgICAgIGFsbFN0cnVjdHVyZWRSb3dzOiBkYXRhLFxuICAgICAgfSBzYXRpc2ZpZXMgU3ByZWFkc2hlZXRJbXBvcnRJbXBvcnRWYWxpZGF0aW9uUmVzdWx0PFQ+LFxuICAgICk7XG5cbiAgICBzZXRDdXJyZW50U3RlcFN0YXRlKHtcbiAgICAgIHR5cGU6IFNwcmVhZHNoZWV0SW1wb3J0U3RlcFR5cGUubG9hZGluZyxcbiAgICB9KTtcblxuICAgIGF3YWl0IG9uU3VibWl0KGNhbGN1bGF0ZWREYXRhLCBmaWxlKTtcbiAgICBvbkNsb3NlKCk7XG4gIH07XG4gIGNvbnN0IG9uQ29udGludWUgPSAoKSA9PiB7XG4gICAgY29uc3QgaW52YWxpZERhdGEgPSBkYXRhLmZpbmQoKHZhbHVlKSA9PiB7XG4gICAgICBpZiAoaXNEZWZpbmVkKHZhbHVlPy5fX2Vycm9ycykpIHtcbiAgICAgICAgcmV0dXJuICEhT2JqZWN0LnZhbHVlcyh2YWx1ZS5fX2Vycm9ycyk/LmZpbHRlcihcbiAgICAgICAgICAoZXJyKSA9PiBlcnIubGV2ZWwgPT09ICdlcnJvcicsXG4gICAgICAgICkubGVuZ3RoO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuICAgIGlmICghaW52YWxpZERhdGEpIHtcbiAgICAgIHN1Ym1pdERhdGEoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZW5xdWV1ZURpYWxvZyh7XG4gICAgICAgIHRpdGxlOiB0YEZpbmlzaCBmbG93IHdpdGggZXJyb3JzYCxcbiAgICAgICAgbWVzc2FnZTogdGBUaGVyZSBhcmUgc3RpbGwgc29tZSByb3dzIHRoYXQgY29udGFpbiBlcnJvcnMuIFJvd3Mgd2l0aCBlcnJvcnMgd2lsbCBiZSBpZ25vcmVkIHdoZW4gc3VibWl0dGluZy5gLFxuICAgICAgICBidXR0b25zOiBbXG4gICAgICAgICAgeyB0aXRsZTogdGBDYW5jZWxgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgdGl0bGU6IHRgU3VibWl0YCxcbiAgICAgICAgICAgIHZhcmlhbnQ6ICdwcmltYXJ5JyxcbiAgICAgICAgICAgIG9uQ2xpY2s6IHN1Ym1pdERhdGEsXG4gICAgICAgICAgICByb2xlOiAnY29uZmlybScsXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICA8U3R5bGVkQ29udGVudD5cbiAgICAgICAgPEhlYWRpbmdcbiAgICAgICAgICB0aXRsZT17dGBSZXZpZXcgeW91ciBpbXBvcnRgfVxuICAgICAgICAgIGRlc2NyaXB0aW9uPXt0YENvcnJlY3QgdGhlIGlzc3VlcyBhbmQgZmlsbCB0aGUgbWlzc2luZyBkYXRhLmB9XG4gICAgICAgIC8+XG4gICAgICAgIDxTdHlsZWRUb29sYmFyPlxuICAgICAgICAgIDxTdHlsZWRFcnJvclRvZ2dsZT5cbiAgICAgICAgICAgIDxUb2dnbGVcbiAgICAgICAgICAgICAgdmFsdWU9e2ZpbHRlckJ5RXJyb3JzfVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KCkgPT4gc2V0RmlsdGVyQnlFcnJvcnMoIWZpbHRlckJ5RXJyb3JzKX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8U3R5bGVkRXJyb3JUb2dnbGVEZXNjcmlwdGlvbj5cbiAgICAgICAgICAgICAgPFRyYW5zPlNob3cgb25seSByb3dzIHdpdGggZXJyb3JzPC9UcmFucz5cbiAgICAgICAgICAgIDwvU3R5bGVkRXJyb3JUb2dnbGVEZXNjcmlwdGlvbj5cbiAgICAgICAgICA8L1N0eWxlZEVycm9yVG9nZ2xlPlxuICAgICAgICAgIDxTdHlsZWRFcnJvclRvZ2dsZT5cbiAgICAgICAgICAgIDxUb2dnbGVcbiAgICAgICAgICAgICAgdmFsdWU9e3Nob3dVbm1hdGNoZWRDb2x1bW5zfVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KCkgPT4gc2V0U2hvd1VubWF0Y2hlZENvbHVtbnMoIXNob3dVbm1hdGNoZWRDb2x1bW5zKX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8U3R5bGVkRXJyb3JUb2dnbGVEZXNjcmlwdGlvbj5cbiAgICAgICAgICAgICAgPFRyYW5zPlNob3cgdW5tYXRjaGVkIGNvbHVtbnM8L1RyYW5zPlxuICAgICAgICAgICAgPC9TdHlsZWRFcnJvclRvZ2dsZURlc2NyaXB0aW9uPlxuICAgICAgICAgIDwvU3R5bGVkRXJyb3JUb2dnbGU+XG4gICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgSWNvbj17SWNvblRyYXNofVxuICAgICAgICAgICAgdGl0bGU9e3RgUmVtb3ZlYH1cbiAgICAgICAgICAgIGFjY2VudD1cImRhbmdlclwiXG4gICAgICAgICAgICBvbkNsaWNrPXtkZWxldGVTZWxlY3RlZFJvd3N9XG4gICAgICAgICAgICBkaXNhYmxlZD17c2VsZWN0ZWRSb3dzLnNpemUgPT09IDB9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9TdHlsZWRUb29sYmFyPlxuICAgICAgICA8U3R5bGVkU2Nyb2xsQ29udGFpbmVyPlxuICAgICAgICAgIDxTcHJlYWRzaGVldEltcG9ydFRhYmxlXG4gICAgICAgICAgICByb3dLZXlHZXR0ZXI9e3Jvd0tleUdldHRlcn1cbiAgICAgICAgICAgIHJvd3M9e3RhYmxlRGF0YX1cbiAgICAgICAgICAgIG9uUm93c0NoYW5nZT17dXBkYXRlUm93fVxuICAgICAgICAgICAgY29sdW1ucz17Y29sdW1uc31cbiAgICAgICAgICAgIHNlbGVjdGVkUm93cz17c2VsZWN0ZWRSb3dzfVxuICAgICAgICAgICAgb25TZWxlY3RlZFJvd3NDaGFuZ2U9e3NldFNlbGVjdGVkUm93cyBhcyBhbnl9IC8vIFRPRE86IHJlcGxhY2UgJ2FueSdcbiAgICAgICAgICAgIGNvbXBvbmVudHM9e3tcbiAgICAgICAgICAgICAgbm9Sb3dzRmFsbGJhY2s6IChcbiAgICAgICAgICAgICAgICA8U3R5bGVkTm9Sb3dzQ29udGFpbmVyPlxuICAgICAgICAgICAgICAgICAge2ZpbHRlckJ5RXJyb3JzXG4gICAgICAgICAgICAgICAgICAgID8gdGBObyBkYXRhIGNvbnRhaW5pbmcgZXJyb3JzYFxuICAgICAgICAgICAgICAgICAgICA6IHRgTm8gZGF0YSBmb3VuZGB9XG4gICAgICAgICAgICAgICAgPC9TdHlsZWROb1Jvd3NDb250YWluZXI+XG4gICAgICAgICAgICAgICksXG4gICAgICAgICAgICB9fVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvU3R5bGVkU2Nyb2xsQ29udGFpbmVyPlxuICAgICAgPC9TdHlsZWRDb250ZW50PlxuICAgICAgPFN0ZXBOYXZpZ2F0aW9uQnV0dG9uXG4gICAgICAgIG9uQ2xpY2s9e29uQ29udGludWV9XG4gICAgICAgIG9uQmFjaz17b25CYWNrfVxuICAgICAgICB0aXRsZT17dGBDb25maXJtYH1cbiAgICAgIC8+XG4gICAgPC8+XG4gICk7XG59O1xuIl0sIm5hbWVzIjpbIkhlYWRpbmciLCJTcHJlYWRzaGVldEltcG9ydFRhYmxlIiwiU3RlcE5hdmlnYXRpb25CdXR0b24iLCJ1c2VTcHJlYWRzaGVldEltcG9ydEludGVybmFsIiwiU3ByZWFkc2hlZXRJbXBvcnRTdGVwVHlwZSIsIlNwcmVhZHNoZWV0Q29sdW1uVHlwZSIsImFkZEVycm9yc0FuZFJ1bkhvb2tzIiwidXNlRGlhbG9nTWFuYWdlciIsIk1vZGFsIiwic3R5bGVkIiwidXNlQ2FsbGJhY2siLCJ1c2VNZW1vIiwidXNlU3RhdGUiLCJpc0RlZmluZWQiLCJCdXR0b24iLCJJY29uVHJhc2giLCJUb2dnbGUiLCJnZW5lcmF0ZUNvbHVtbnMiLCJTdHlsZWRDb250ZW50IiwiQ29udGVudCIsInRoZW1lIiwic3BhY2luZyIsIlN0eWxlZFRvb2xiYXIiLCJkaXYiLCJTdHlsZWRFcnJvclRvZ2dsZSIsIlN0eWxlZEVycm9yVG9nZ2xlRGVzY3JpcHRpb24iLCJzcGFuIiwiZm9udCIsImNvbG9yIiwicHJpbWFyeSIsInNpemUiLCJzbSIsIndlaWdodCIsInJlZ3VsYXIiLCJTdHlsZWRTY3JvbGxDb250YWluZXIiLCJTdHlsZWROb1Jvd3NDb250YWluZXIiLCJWYWxpZGF0aW9uU3RlcCIsImluaXRpYWxEYXRhIiwiaW1wb3J0ZWRDb2x1bW5zIiwiZmlsZSIsInNldEN1cnJlbnRTdGVwU3RhdGUiLCJvbkJhY2siLCJlbnF1ZXVlRGlhbG9nIiwiZmllbGRzIiwib25DbG9zZSIsIm9uU3VibWl0Iiwicm93SG9vayIsInRhYmxlSG9vayIsImRhdGEiLCJzZXREYXRhIiwic2VsZWN0ZWRSb3dzIiwic2V0U2VsZWN0ZWRSb3dzIiwiU2V0IiwiZmlsdGVyQnlFcnJvcnMiLCJzZXRGaWx0ZXJCeUVycm9ycyIsInNob3dVbm1hdGNoZWRDb2x1bW5zIiwic2V0U2hvd1VubWF0Y2hlZENvbHVtbnMiLCJ1cGRhdGVEYXRhIiwicm93cyIsImRlbGV0ZVNlbGVjdGVkUm93cyIsIm5ld0RhdGEiLCJmaWx0ZXIiLCJ2YWx1ZSIsImhhcyIsIl9faW5kZXgiLCJ1c2VMaW5ndWkiLCJ1cGRhdGVSb3ciLCJjaGFuZ2VkRGF0YSIsImNoYW5nZXMiLCJpbmRleGVzIiwicmVkdWNlIiwiYWNjIiwiaW5kZXgiLCJyZWFsSW5kZXgiLCJmaW5kSW5kZXgiLCJPYmplY3QiLCJhc3NpZ24iLCJjb2x1bW5zIiwibWFwIiwiY29sdW1uIiwiaGFzQmVlbkltcG9ydGVkIiwiaW1wb3J0Q29sdW1uIiwidHlwZSIsIm1hdGNoZWQiLCJrZXkiLCJtYXRjaGVkU2VsZWN0IiwibWF0Y2hlZFNlbGVjdE9wdGlvbnMiLCJtYXRjaGVkQ2hlY2tib3giLCJsZW5ndGgiLCJCb29sZWFuIiwidGFibGVEYXRhIiwiX19lcnJvcnMiLCJ2YWx1ZXMiLCJlcnIiLCJsZXZlbCIsInJvd0tleUdldHRlciIsInJvdyIsInN1Ym1pdERhdGEiLCJjYWxjdWxhdGVkRGF0YSIsImludmFsaWRTdHJ1Y3R1cmVkUm93cyIsInB1c2giLCJ2YWxpZFN0cnVjdHVyZWRSb3dzIiwiYWxsU3RydWN0dXJlZFJvd3MiLCJsb2FkaW5nIiwib25Db250aW51ZSIsImludmFsaWREYXRhIiwiZmluZCIsInRpdGxlIiwibWVzc2FnZSIsImJ1dHRvbnMiLCJ2YXJpYW50Iiwib25DbGljayIsInJvbGUiLCJkZXNjcmlwdGlvbiIsIm9uQ2hhbmdlIiwiSWNvbiIsImFjY2VudCIsImRpc2FibGVkIiwib25Sb3dzQ2hhbmdlIiwib25TZWxlY3RlZFJvd3NDaGFuZ2UiLCJjb21wb25lbnRzIiwibm9Sb3dzRmFsbGJhY2siXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSxTQUFTQSxPQUFPLFFBQVEsMENBQTBDO0FBQ2xFLFNBQVNDLHNCQUFzQixRQUFRLHlEQUF5RDtBQUNoRyxTQUFTQyxvQkFBb0IsUUFBUSx1REFBdUQ7QUFDNUYsU0FBU0MsNEJBQTRCLFFBQVEsMERBQTBEO0FBRXZHLFNBQVNDLHlCQUF5QixRQUFRLDZEQUE2RDtBQU12RyxTQUFTQyxxQkFBcUIsUUFBUSxtREFBbUQ7QUFDekYsU0FBU0Msb0JBQW9CLFFBQVEsMkNBQTJDO0FBQ2hGLFNBQVNDLGdCQUFnQixRQUFRLHNEQUFzRDtBQUN2RixTQUFTQyxLQUFLLFFBQVEscUNBQXFDO0FBQzNELE9BQU9DLFlBQVksa0JBQWtCOzs7QUFFckMsU0FHRUMsV0FBVyxFQUNYQyxPQUFPLEVBQ1BDLFFBQVEsUUFDSCxRQUFRO0FBR2YsU0FBU0MsU0FBUyxRQUFRLHNCQUFzQjtBQUNoRCxTQUFTQyxNQUFNLEVBQUVDLFNBQVMsRUFBRUMsTUFBTSxRQUFRLFlBQVk7QUFDdEQsU0FBU0MsZUFBZSxRQUFRLHVCQUF1QjtBQUd2RCxNQUFNQyxnQkFBZ0JULE9BQU9ELE1BQU1XLE9BQU8sQ0FBQyxDQUFDO2dCQUM1QixFQUFFLENBQUMsRUFBRUMsS0FBSyxFQUFFLEdBQUtBLE1BQU1DLE9BQU8sQ0FBQyxHQUFHO2lCQUNqQyxFQUFFLENBQUMsRUFBRUQsS0FBSyxFQUFFLEdBQUtBLE1BQU1DLE9BQU8sQ0FBQyxHQUFHO0FBQ25ELENBQUM7S0FIS0g7QUFLTixNQUFNSSxnQkFBZ0JiLE9BQU9jLEdBQUcsQ0FBQzs7OztpQkFJaEIsRUFBRSxDQUFDLEVBQUVILEtBQUssRUFBRSxHQUFLQSxNQUFNQyxPQUFPLENBQUMsR0FBRztjQUNyQyxFQUFFLENBQUMsRUFBRUQsS0FBSyxFQUFFLEdBQUtBLE1BQU1DLE9BQU8sQ0FBQyxHQUFHO0FBQ2hELENBQUM7TUFOS0M7QUFRTixNQUFNRSxvQkFBb0JmLE9BQU9jLEdBQUcsQ0FBQzs7OztBQUlyQyxDQUFDO01BSktDO0FBTU4sTUFBTUMsK0JBQStCaEIsT0FBT2lCLElBQUksQ0FBQztTQUN4QyxFQUFFLENBQUMsRUFBRU4sS0FBSyxFQUFFLEdBQUtBLE1BQU1PLElBQUksQ0FBQ0MsS0FBSyxDQUFDQyxPQUFPLENBQUM7YUFDdEMsRUFBRSxDQUFDLEVBQUVULEtBQUssRUFBRSxHQUFLQSxNQUFNTyxJQUFJLENBQUNHLElBQUksQ0FBQ0MsRUFBRSxDQUFDO2VBQ2xDLEVBQUUsQ0FBQyxFQUFFWCxLQUFLLEVBQUUsR0FBS0EsTUFBTU8sSUFBSSxDQUFDSyxNQUFNLENBQUNDLE9BQU8sQ0FBQztlQUMzQyxFQUFFLENBQUMsRUFBRWIsS0FBSyxFQUFFLEdBQUtBLE1BQU1DLE9BQU8sQ0FBQyxHQUFHO0FBQ2pELENBQUM7TUFMS0k7QUFPTixNQUFNUyx3QkFBd0J6QixPQUFPYyxHQUFHLENBQUM7Ozs7OztBQU16QyxDQUFDO01BTktXO0FBUU4sTUFBTUMsd0JBQXdCMUIsT0FBT2MsR0FBRyxDQUFDOzs7O2NBSTNCLEVBQUUsQ0FBQyxFQUFFSCxLQUFLLEVBQUUsR0FBS0EsTUFBTUMsT0FBTyxDQUFDLEdBQUc7QUFDaEQsQ0FBQztBQVVELE9BQU8sTUFBTWUsaUJBQWlCLENBQW1CLEVBQy9DQyxXQUFXLEVBQ1hDLGVBQWUsRUFDZkMsSUFBSSxFQUNKQyxtQkFBbUIsRUFDbkJDLE1BQU0sRUFDaUI7O0lBQ3ZCLE1BQU0sRUFBRUMsYUFBYSxFQUFFLEdBQUduQztJQUMxQixNQUFNLEVBQUVvQyxNQUFNLEVBQUVDLE9BQU8sRUFBRUMsUUFBUSxFQUFFQyxPQUFPLEVBQUVDLFNBQVMsRUFBRSxHQUNyRDVDO0lBRUYsTUFBTSxDQUFDNkMsTUFBTUMsUUFBUSxHQUFHckMsU0FHdEJELFFBQ0UsSUFBTUwscUJBQXdCK0IsYUFBYU0sUUFBUUcsU0FBU0MsWUFDNUQsdURBQXVEO0lBQ3ZELEVBQUU7SUFHTixNQUFNLENBQUNHLGNBQWNDLGdCQUFnQixHQUFHdkMsU0FFdEMsSUFBSXdDO0lBQ04sTUFBTSxDQUFDQyxnQkFBZ0JDLGtCQUFrQixHQUFHMUMsU0FBUztJQUNyRCxNQUFNLENBQUMyQyxzQkFBc0JDLHdCQUF3QixHQUFHNUMsU0FBUztJQUVqRSxNQUFNNkMsYUFBYS9DLFlBQ2pCLENBQUNnRDtRQUNDVCxRQUFRM0MscUJBQXdCb0QsTUFBTWYsUUFBUUcsU0FBU0M7SUFDekQsR0FDQTtRQUFDRTtRQUFTSDtRQUFTQztRQUFXSjtLQUFPO0lBR3ZDLE1BQU1nQixxQkFBcUI7UUFDekIsSUFBSVQsYUFBYXBCLElBQUksR0FBRyxHQUFHO1lBQ3pCLE1BQU04QixVQUFVWixLQUFLYSxNQUFNLENBQUMsQ0FBQ0MsUUFBVSxDQUFDWixhQUFhYSxHQUFHLENBQUNELE1BQU1FLE9BQU87WUFDdEVQLFdBQVdHO1lBQ1hULGdCQUFnQixJQUFJQztRQUN0QjtJQUNGO0lBRUEsTUFBTSw0QkFBUWE7SUFFZCxNQUFNQyxZQUFZeEQsWUFDaEIsQ0FDRWdELE1BQ0FTO1FBRUEsTUFBTUMsVUFBVUQsYUFBYUUsUUFBUUMsT0FDbkMsd0NBQXdDO1FBQ3hDLENBQUNDLEtBQVVDO1lBQ1QscURBQXFEO1lBQ3JELE1BQU1DLFlBQVl6QixLQUFLMEIsU0FBUyxDQUM5QixDQUFDWixRQUFVQSxNQUFNRSxPQUFPLEtBQUtOLElBQUksQ0FBQ2MsTUFBTSxDQUFDUixPQUFPO1lBRWxETyxHQUFHLENBQUNFLFVBQVUsR0FBR2YsSUFBSSxDQUFDYyxNQUFNO1lBQzVCLE9BQU9EO1FBQ1QsR0FDQSxDQUFDO1FBRUgsTUFBTVgsVUFBVWUsT0FBT0MsTUFBTSxDQUFDLEVBQUUsRUFBRTVCLE1BQU1vQjtRQUN4Q1gsV0FBV0c7SUFDYixHQUNBO1FBQUNaO1FBQU1TO0tBQVc7SUFHcEIsTUFBTW9CLFVBQVVsRSxRQUNkLElBQ0VNLGdCQUFnQjBCLFFBQ2JtQyxHQUFHLENBQUMsQ0FBQ0M7WUFDSixNQUFNQyxrQkFDSjFDLGdCQUFnQnVCLE1BQU0sQ0FDcEIsQ0FBQ29CLGVBQ0MsQUFBQ0EsYUFBYUMsSUFBSSxLQUFLN0Usc0JBQXNCOEUsT0FBTyxJQUNsREYsYUFBYW5CLEtBQUssS0FBS2lCLE9BQU9LLEdBQUcsSUFDbENILGFBQWFDLElBQUksS0FBSzdFLHNCQUFzQmdGLGFBQWEsSUFDeERKLGFBQWFuQixLQUFLLEtBQUtpQixPQUFPSyxHQUFHLElBQ2xDSCxhQUFhQyxJQUFJLEtBQ2hCN0Usc0JBQXNCaUYsb0JBQW9CLElBQzFDTCxhQUFhbkIsS0FBSyxLQUFLaUIsT0FBT0ssR0FBRyxJQUNsQ0gsYUFBYUMsSUFBSSxLQUFLN0Usc0JBQXNCa0YsZUFBZSxJQUMxRE4sYUFBYW5CLEtBQUssS0FBS2lCLE9BQU9LLEdBQUcsSUFDbkNMLE9BQU9LLEdBQUcsS0FBSyxjQUNqQkksTUFBTSxHQUFHO1lBRWIsSUFBSSxDQUFDUixtQkFBbUIsQ0FBQ3pCLHNCQUFzQixPQUFPO1lBQ3RELE9BQU93QjtRQUNULEdBQ0NsQixNQUFNLENBQUM0QixVQUNaO1FBQUM5QztRQUFRTDtRQUFpQmlCO0tBQXFCO0lBR2pELE1BQU1tQyxZQUFZL0UsUUFBUTtRQUN4QixJQUFJMEMsZ0JBQWdCO1lBQ2xCLE9BQU9MLEtBQUthLE1BQU0sQ0FBQyxDQUFDQztnQkFDbEIsSUFBSWpELFVBQVVpRCxPQUFPNkIsV0FBVztvQkFDOUIsT0FBT2hCLE9BQU9pQixNQUFNLENBQUM5QixNQUFNNkIsUUFBUSxHQUFHOUIsT0FDcEMsQ0FBQ2dDLE1BQVFBLElBQUlDLEtBQUssS0FBSyxTQUN2Qk47Z0JBQ0o7Z0JBQ0EsT0FBTztZQUNUO1FBQ0Y7UUFDQSxPQUFPeEM7SUFDVCxHQUFHO1FBQUNBO1FBQU1LO0tBQWU7SUFFekIsTUFBTTBDLGVBQWVyRixZQUNuQixDQUFDc0YsTUFDQ0EsSUFBSWhDLE9BQU8sRUFDYixFQUFFO0lBR0osTUFBTWlDLGFBQWE7UUFDakIsTUFBTUMsaUJBQWlCbEQsS0FBS3NCLE1BQU0sQ0FDaEMsQ0FBQ0MsS0FBS1Q7WUFDSixNQUFNLEVBQUVFLE9BQU8sRUFBRTJCLFFBQVEsRUFBRSxHQUFHQyxRQUFRLEdBQUc5QjtZQUN6QyxJQUFJakQsVUFBVThFLFdBQVc7Z0JBQ3ZCLElBQUssTUFBTVAsT0FBT08sU0FBVTtvQkFDMUIsSUFBSUEsUUFBUSxDQUFDUCxJQUFJLENBQUNVLEtBQUssS0FBSyxTQUFTO3dCQUNuQ3ZCLElBQUk0QixxQkFBcUIsQ0FBQ0MsSUFBSSxDQUM1QlI7d0JBRUYsT0FBT3JCO29CQUNUO2dCQUNGO1lBQ0Y7WUFDQUEsSUFBSThCLG1CQUFtQixDQUFDRCxJQUFJLENBQzFCUjtZQUVGLE9BQU9yQjtRQUNULEdBQ0E7WUFDRThCLHFCQUFxQixFQUFFO1lBQ3ZCRix1QkFBdUIsRUFBRTtZQUN6QkcsbUJBQW1CdEQ7UUFDckI7UUFHRlIsb0JBQW9CO1lBQ2xCMEMsTUFBTTlFLDBCQUEwQm1HLE9BQU87UUFDekM7UUFFQSxNQUFNMUQsU0FBU3FELGdCQUFnQjNEO1FBQy9CSztJQUNGO0lBQ0EsTUFBTTRELGFBQWE7UUFDakIsTUFBTUMsY0FBY3pELEtBQUswRCxJQUFJLENBQUMsQ0FBQzVDO1lBQzdCLElBQUlqRCxVQUFVaUQsT0FBTzZCLFdBQVc7Z0JBQzlCLE9BQU8sQ0FBQyxDQUFDaEIsT0FBT2lCLE1BQU0sQ0FBQzlCLE1BQU02QixRQUFRLEdBQUc5QixPQUN0QyxDQUFDZ0MsTUFBUUEsSUFBSUMsS0FBSyxLQUFLLFNBQ3ZCTjtZQUNKO1lBQ0EsT0FBTztRQUNUO1FBQ0EsSUFBSSxDQUFDaUIsYUFBYTtZQUNoQlI7UUFDRixPQUFPO1lBQ0x2RCxjQUFjO2dCQUNaaUUsS0FBSzs7OztnQkFDTEMsT0FBTzs7OztnQkFDUEMsU0FBUztvQkFDUDt3QkFBRUYsS0FBSzs7OztvQkFBWTtvQkFDbkI7d0JBQ0VBLEtBQUs7Ozs7d0JBQ0xHLFNBQVM7d0JBQ1RDLFNBQVNkO3dCQUNUZSxNQUFNO29CQUNSO2lCQUNEO1lBQ0g7UUFDRjtJQUNGO0lBRUEscUJBQ0U7OzBCQUNFLFFBQUM5Rjs7a0NBQ0MsUUFBQ2xCO3dCQUNDMkcsS0FBSzs7Ozt3QkFDTE0sV0FBVzs7Ozs7Ozs7O2tDQUViLFFBQUMzRjs7MENBQ0MsUUFBQ0U7O2tEQUNDLFFBQUNSO3dDQUNDOEMsT0FBT1Q7d0NBQ1A2RCxVQUFVLElBQU01RCxrQkFBa0IsQ0FBQ0Q7Ozs7OztrREFFckMsUUFBQzVCO2tEQUNDLGNBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7MENBR0osUUFBQ0Q7O2tEQUNDLFFBQUNSO3dDQUNDOEMsT0FBT1A7d0NBQ1AyRCxVQUFVLElBQU0xRCx3QkFBd0IsQ0FBQ0Q7Ozs7OztrREFFM0MsUUFBQzlCO2tEQUNDLGNBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7MENBR0osUUFBQ1g7Z0NBQ0NxRyxNQUFNcEc7Z0NBQ040RixLQUFLOzs7O2dDQUNMUyxRQUFPO2dDQUNQTCxTQUFTcEQ7Z0NBQ1QwRCxVQUFVbkUsYUFBYXBCLElBQUksS0FBSzs7Ozs7Ozs7Ozs7O2tDQUdwQyxRQUFDSTtrQ0FDQyxjQUFBLFFBQUNqQzs0QkFDQzhGLGNBQWNBOzRCQUNkckMsTUFBTWdDOzRCQUNONEIsY0FBY3BEOzRCQUNkVyxTQUFTQTs0QkFDVDNCLGNBQWNBOzRCQUNkcUUsc0JBQXNCcEU7NEJBQ3RCcUUsWUFBWTtnQ0FDVkMsOEJBQ0UsUUFBQ3RGOzhDQUNFa0I7Ozs7Ozs7Ozs7Ozs0QkFLUDs7Ozs7Ozs7Ozs7Ozs7Ozs7MEJBSU4sUUFBQ25EO2dCQUNDNkcsU0FBU1A7Z0JBQ1QvRCxRQUFRQTtnQkFDUmtFLEtBQUs7Ozs7Ozs7Ozs7O0FBSWIsRUFBRTtHQTFPV3ZFOztRQU9lN0I7UUFFeEJKOzs7TUFUU2lDIn0=