import __vite__cjsImport0__sniptt_guards from "/@fs/D:/twenty-table-o/node_modules/.vite/packages/twenty-front/deps/@sniptt_guards.js?v=226f7286"; const isNull = __vite__cjsImport0__sniptt_guards["isNull"]; const isUndefined = __vite__cjsImport0__sniptt_guards["isUndefined"];
import { getRecordFromCache } from "/src/modules/object-record/cache/utils/getRecordFromCache.ts";
import { GRAPHQL_TYPENAME_KEY } from "/src/modules/object-record/constants/GraphqlTypenameKey.ts";
import { isFieldActor } from "/src/modules/object-record/record-field/types/guards/isFieldActor.ts";
import { isFieldRelation } from "/src/modules/object-record/record-field/types/guards/isFieldRelation.ts";
import { isFieldUuid } from "/src/modules/object-record/record-field/types/guards/isFieldUuid.ts";
import { buildOptimisticActorFieldValueFromCurrentWorkspaceMember } from "/src/modules/object-record/utils/buildOptimisticActorFieldValueFromCurrentWorkspaceMember.ts";
import { getForeignKeyNameFromRelationFieldName } from "/src/modules/object-record/utils/getForeignKeyNameFromRelationFieldName.ts";
import { RelationDefinitionType } from "/src/generated-metadata/graphql.ts";
import { FieldMetadataType } from "/src/generated/graphql.tsx";
import { isDefined } from "/@fs/D:/twenty-table-o/packages/twenty-shared/utils/dist/twenty-shared-utils.esm.js";
export const computeOptimisticRecordFromInput = ({ objectMetadataItem, recordInput, cache, objectMetadataItems, currentWorkspaceMember })=>{
    const unknownRecordInputFields = Object.keys(recordInput).filter((recordKey)=>{
        const isUnknownMetadataItemField = objectMetadataItem.fields.find((field)=>field.name === recordKey) === undefined;
        const isTypenameField = recordKey === GRAPHQL_TYPENAME_KEY;
        return isUnknownMetadataItemField && !isTypenameField;
    });
    if (unknownRecordInputFields.length > 0) {
        throw new Error(`Should never occur, encountered unknown fields ${unknownRecordInputFields.join(', ')} in objectMetadataItem ${objectMetadataItem.nameSingular}`);
    }
    const optimisticRecord = {};
    for (const fieldMetadataItem of objectMetadataItem.fields){
        const recordInputFieldValue = recordInput[fieldMetadataItem.name];
        if (isFieldUuid(fieldMetadataItem)) {
            const isRelationFieldId = objectMetadataItem.fields.some(({ type, relationDefinition })=>{
                if (type !== FieldMetadataType.RELATION) {
                    return false;
                }
                if (!isDefined(relationDefinition)) {
                    return false;
                }
                const sourceFieldName = relationDefinition.sourceFieldMetadata.name;
                return getForeignKeyNameFromRelationFieldName(sourceFieldName) === fieldMetadataItem.name;
            });
            if (isRelationFieldId) {
                continue;
            }
        }
        if (isFieldActor(fieldMetadataItem) && isDefined(recordInputFieldValue)) {
            const defaultActorFieldValue = buildOptimisticActorFieldValueFromCurrentWorkspaceMember(currentWorkspaceMember);
            optimisticRecord[fieldMetadataItem.name] = {
                ...defaultActorFieldValue,
                ...recordInputFieldValue
            };
            continue;
        }
        const isRelationField = isFieldRelation(fieldMetadataItem);
        if (!isRelationField) {
            if (!isDefined(recordInputFieldValue)) {
                continue;
            }
            if (!fieldMetadataItem.isNullable && recordInputFieldValue == null) {
                continue;
            }
            optimisticRecord[fieldMetadataItem.name] = recordInputFieldValue;
            continue;
        }
        if (fieldMetadataItem.relationDefinition?.direction === RelationDefinitionType.ONE_TO_MANY) {
            continue;
        }
        const isManyToOneRelation = fieldMetadataItem.relationDefinition?.direction === RelationDefinitionType.MANY_TO_ONE;
        if (!isManyToOneRelation) {
            continue;
        }
        if (!isUndefined(recordInputFieldValue)) {
            throw new Error(`Should never provide relation mutation through anything else than the fieldId e.g companyId and not company, encountered: ${fieldMetadataItem.name}`);
        }
        const relationFieldIdName = getForeignKeyNameFromRelationFieldName(fieldMetadataItem.name);
        const recordInputFieldIdValue = recordInput[relationFieldIdName];
        if (isUndefined(recordInputFieldIdValue)) {
            continue;
        }
        const relationIdFieldMetadataItem = objectMetadataItem.fields.find((field)=>field.name === relationFieldIdName);
        if (!isDefined(relationIdFieldMetadataItem)) {
            throw new Error('Should never occur, encountered unknown relationId within relations definitions');
        }
        if (isNull(recordInputFieldIdValue)) {
            optimisticRecord[relationFieldIdName] = null;
            optimisticRecord[fieldMetadataItem.name] = null;
            continue;
        }
        const targetNameSingular = fieldMetadataItem.relationDefinition?.targetObjectMetadata.nameSingular;
        const targetObjectMetataDataItem = objectMetadataItems.find(({ nameSingular })=>nameSingular === targetNameSingular);
        if (!isDefined(targetObjectMetataDataItem)) {
            throw new Error('Should never occur, encountered invalid relation definition');
        }
        const cachedRecord = getRecordFromCache({
            cache,
            objectMetadataItem: targetObjectMetataDataItem,
            objectMetadataItems,
            recordId: recordInputFieldIdValue
        });
        optimisticRecord[relationFieldIdName] = recordInputFieldIdValue;
        if (!isDefined(cachedRecord) || Object.keys(cachedRecord).length <= 0) {
            continue;
        }
        optimisticRecord[fieldMetadataItem.name] = cachedRecord;
    }
    return optimisticRecord;
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXB1dGVPcHRpbWlzdGljUmVjb3JkRnJvbUlucHV0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGlzTnVsbCwgaXNVbmRlZmluZWQgfSBmcm9tICdAc25pcHR0L2d1YXJkcyc7XG5cbmltcG9ydCB7IEN1cnJlbnRXb3Jrc3BhY2VNZW1iZXIgfSBmcm9tICdAL2F1dGgvc3RhdGVzL2N1cnJlbnRXb3Jrc3BhY2VNZW1iZXJTdGF0ZSc7XG5pbXBvcnQgeyBPYmplY3RNZXRhZGF0YUl0ZW0gfSBmcm9tICdAL29iamVjdC1tZXRhZGF0YS90eXBlcy9PYmplY3RNZXRhZGF0YUl0ZW0nO1xuaW1wb3J0IHtcbiAgZ2V0UmVjb3JkRnJvbUNhY2hlLFxuICBHZXRSZWNvcmRGcm9tQ2FjaGVBcmdzLFxufSBmcm9tICdAL29iamVjdC1yZWNvcmQvY2FjaGUvdXRpbHMvZ2V0UmVjb3JkRnJvbUNhY2hlJztcbmltcG9ydCB7IEdSQVBIUUxfVFlQRU5BTUVfS0VZIH0gZnJvbSAnQC9vYmplY3QtcmVjb3JkL2NvbnN0YW50cy9HcmFwaHFsVHlwZW5hbWVLZXknO1xuaW1wb3J0IHsgRmllbGRBY3RvclZhbHVlIH0gZnJvbSAnQC9vYmplY3QtcmVjb3JkL3JlY29yZC1maWVsZC90eXBlcy9GaWVsZE1ldGFkYXRhJztcbmltcG9ydCB7IGlzRmllbGRBY3RvciB9IGZyb20gJ0Avb2JqZWN0LXJlY29yZC9yZWNvcmQtZmllbGQvdHlwZXMvZ3VhcmRzL2lzRmllbGRBY3Rvcic7XG5pbXBvcnQgeyBpc0ZpZWxkUmVsYXRpb24gfSBmcm9tICdAL29iamVjdC1yZWNvcmQvcmVjb3JkLWZpZWxkL3R5cGVzL2d1YXJkcy9pc0ZpZWxkUmVsYXRpb24nO1xuaW1wb3J0IHsgaXNGaWVsZFV1aWQgfSBmcm9tICdAL29iamVjdC1yZWNvcmQvcmVjb3JkLWZpZWxkL3R5cGVzL2d1YXJkcy9pc0ZpZWxkVXVpZCc7XG5pbXBvcnQgeyBPYmplY3RSZWNvcmQgfSBmcm9tICdAL29iamVjdC1yZWNvcmQvdHlwZXMvT2JqZWN0UmVjb3JkJztcbmltcG9ydCB7IGJ1aWxkT3B0aW1pc3RpY0FjdG9yRmllbGRWYWx1ZUZyb21DdXJyZW50V29ya3NwYWNlTWVtYmVyIH0gZnJvbSAnQC9vYmplY3QtcmVjb3JkL3V0aWxzL2J1aWxkT3B0aW1pc3RpY0FjdG9yRmllbGRWYWx1ZUZyb21DdXJyZW50V29ya3NwYWNlTWVtYmVyJztcbmltcG9ydCB7IGdldEZvcmVpZ25LZXlOYW1lRnJvbVJlbGF0aW9uRmllbGROYW1lIH0gZnJvbSAnQC9vYmplY3QtcmVjb3JkL3V0aWxzL2dldEZvcmVpZ25LZXlOYW1lRnJvbVJlbGF0aW9uRmllbGROYW1lJztcbmltcG9ydCB7IFJlbGF0aW9uRGVmaW5pdGlvblR5cGUgfSBmcm9tICd+L2dlbmVyYXRlZC1tZXRhZGF0YS9ncmFwaHFsJztcbmltcG9ydCB7IEZpZWxkTWV0YWRhdGFUeXBlIH0gZnJvbSAnfi9nZW5lcmF0ZWQvZ3JhcGhxbCc7XG5pbXBvcnQgeyBpc0RlZmluZWQgfSBmcm9tICd0d2VudHktc2hhcmVkL3V0aWxzJztcblxudHlwZSBDb21wdXRlT3B0aW1pc3RpY0NhY2hlUmVjb3JkSW5wdXRBcmdzID0ge1xuICBvYmplY3RNZXRhZGF0YUl0ZW06IE9iamVjdE1ldGFkYXRhSXRlbTtcbiAgcmVjb3JkSW5wdXQ6IFBhcnRpYWw8T2JqZWN0UmVjb3JkPjtcbiAgY3VycmVudFdvcmtzcGFjZU1lbWJlcjogQ3VycmVudFdvcmtzcGFjZU1lbWJlciB8IG51bGw7XG59ICYgUGljazxHZXRSZWNvcmRGcm9tQ2FjaGVBcmdzLCAnY2FjaGUnIHwgJ29iamVjdE1ldGFkYXRhSXRlbXMnPjtcbmV4cG9ydCBjb25zdCBjb21wdXRlT3B0aW1pc3RpY1JlY29yZEZyb21JbnB1dCA9ICh7XG4gIG9iamVjdE1ldGFkYXRhSXRlbSxcbiAgcmVjb3JkSW5wdXQsXG4gIGNhY2hlLFxuICBvYmplY3RNZXRhZGF0YUl0ZW1zLFxuICBjdXJyZW50V29ya3NwYWNlTWVtYmVyLFxufTogQ29tcHV0ZU9wdGltaXN0aWNDYWNoZVJlY29yZElucHV0QXJncykgPT4ge1xuICBjb25zdCB1bmtub3duUmVjb3JkSW5wdXRGaWVsZHMgPSBPYmplY3Qua2V5cyhyZWNvcmRJbnB1dCkuZmlsdGVyKFxuICAgIChyZWNvcmRLZXkpID0+IHtcbiAgICAgIGNvbnN0IGlzVW5rbm93bk1ldGFkYXRhSXRlbUZpZWxkID1cbiAgICAgICAgb2JqZWN0TWV0YWRhdGFJdGVtLmZpZWxkcy5maW5kKChmaWVsZCkgPT4gZmllbGQubmFtZSA9PT0gcmVjb3JkS2V5KSA9PT1cbiAgICAgICAgdW5kZWZpbmVkO1xuICAgICAgY29uc3QgaXNUeXBlbmFtZUZpZWxkID0gcmVjb3JkS2V5ID09PSBHUkFQSFFMX1RZUEVOQU1FX0tFWTtcbiAgICAgIHJldHVybiBpc1Vua25vd25NZXRhZGF0YUl0ZW1GaWVsZCAmJiAhaXNUeXBlbmFtZUZpZWxkO1xuICAgIH0sXG4gICk7XG4gIGlmICh1bmtub3duUmVjb3JkSW5wdXRGaWVsZHMubGVuZ3RoID4gMCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBTaG91bGQgbmV2ZXIgb2NjdXIsIGVuY291bnRlcmVkIHVua25vd24gZmllbGRzICR7dW5rbm93blJlY29yZElucHV0RmllbGRzLmpvaW4oJywgJyl9IGluIG9iamVjdE1ldGFkYXRhSXRlbSAke29iamVjdE1ldGFkYXRhSXRlbS5uYW1lU2luZ3VsYXJ9YCxcbiAgICApO1xuICB9XG5cbiAgY29uc3Qgb3B0aW1pc3RpY1JlY29yZDogUGFydGlhbDxPYmplY3RSZWNvcmQ+ID0ge307XG4gIGZvciAoY29uc3QgZmllbGRNZXRhZGF0YUl0ZW0gb2Ygb2JqZWN0TWV0YWRhdGFJdGVtLmZpZWxkcykge1xuICAgIGNvbnN0IHJlY29yZElucHV0RmllbGRWYWx1ZTogdW5rbm93biA9IHJlY29yZElucHV0W2ZpZWxkTWV0YWRhdGFJdGVtLm5hbWVdO1xuXG4gICAgaWYgKGlzRmllbGRVdWlkKGZpZWxkTWV0YWRhdGFJdGVtKSkge1xuICAgICAgY29uc3QgaXNSZWxhdGlvbkZpZWxkSWQgPSBvYmplY3RNZXRhZGF0YUl0ZW0uZmllbGRzLnNvbWUoXG4gICAgICAgICh7IHR5cGUsIHJlbGF0aW9uRGVmaW5pdGlvbiB9KSA9PiB7XG4gICAgICAgICAgaWYgKHR5cGUgIT09IEZpZWxkTWV0YWRhdGFUeXBlLlJFTEFUSU9OKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCFpc0RlZmluZWQocmVsYXRpb25EZWZpbml0aW9uKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IHNvdXJjZUZpZWxkTmFtZSA9IHJlbGF0aW9uRGVmaW5pdGlvbi5zb3VyY2VGaWVsZE1ldGFkYXRhLm5hbWU7XG4gICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIGdldEZvcmVpZ25LZXlOYW1lRnJvbVJlbGF0aW9uRmllbGROYW1lKHNvdXJjZUZpZWxkTmFtZSkgPT09XG4gICAgICAgICAgICBmaWVsZE1ldGFkYXRhSXRlbS5uYW1lXG4gICAgICAgICAgKTtcbiAgICAgICAgfSxcbiAgICAgICk7XG5cbiAgICAgIGlmIChpc1JlbGF0aW9uRmllbGRJZCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoaXNGaWVsZEFjdG9yKGZpZWxkTWV0YWRhdGFJdGVtKSAmJiBpc0RlZmluZWQocmVjb3JkSW5wdXRGaWVsZFZhbHVlKSkge1xuICAgICAgY29uc3QgZGVmYXVsdEFjdG9yRmllbGRWYWx1ZSA9XG4gICAgICAgIGJ1aWxkT3B0aW1pc3RpY0FjdG9yRmllbGRWYWx1ZUZyb21DdXJyZW50V29ya3NwYWNlTWVtYmVyKFxuICAgICAgICAgIGN1cnJlbnRXb3Jrc3BhY2VNZW1iZXIsXG4gICAgICAgICk7XG4gICAgICBvcHRpbWlzdGljUmVjb3JkW2ZpZWxkTWV0YWRhdGFJdGVtLm5hbWVdID0ge1xuICAgICAgICAuLi5kZWZhdWx0QWN0b3JGaWVsZFZhbHVlLFxuICAgICAgICAuLi4ocmVjb3JkSW5wdXRGaWVsZFZhbHVlIGFzIEZpZWxkQWN0b3JWYWx1ZSksXG4gICAgICB9O1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgY29uc3QgaXNSZWxhdGlvbkZpZWxkID0gaXNGaWVsZFJlbGF0aW9uKGZpZWxkTWV0YWRhdGFJdGVtKTtcbiAgICBpZiAoIWlzUmVsYXRpb25GaWVsZCkge1xuICAgICAgaWYgKCFpc0RlZmluZWQocmVjb3JkSW5wdXRGaWVsZFZhbHVlKSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFmaWVsZE1ldGFkYXRhSXRlbS5pc051bGxhYmxlICYmIHJlY29yZElucHV0RmllbGRWYWx1ZSA9PSBudWxsKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBvcHRpbWlzdGljUmVjb3JkW2ZpZWxkTWV0YWRhdGFJdGVtLm5hbWVdID0gcmVjb3JkSW5wdXRGaWVsZFZhbHVlO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgZmllbGRNZXRhZGF0YUl0ZW0ucmVsYXRpb25EZWZpbml0aW9uPy5kaXJlY3Rpb24gPT09XG4gICAgICBSZWxhdGlvbkRlZmluaXRpb25UeXBlLk9ORV9UT19NQU5ZXG4gICAgKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBjb25zdCBpc01hbnlUb09uZVJlbGF0aW9uID1cbiAgICAgIGZpZWxkTWV0YWRhdGFJdGVtLnJlbGF0aW9uRGVmaW5pdGlvbj8uZGlyZWN0aW9uID09PVxuICAgICAgUmVsYXRpb25EZWZpbml0aW9uVHlwZS5NQU5ZX1RPX09ORTtcbiAgICBpZiAoIWlzTWFueVRvT25lUmVsYXRpb24pIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGlmICghaXNVbmRlZmluZWQocmVjb3JkSW5wdXRGaWVsZFZhbHVlKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgU2hvdWxkIG5ldmVyIHByb3ZpZGUgcmVsYXRpb24gbXV0YXRpb24gdGhyb3VnaCBhbnl0aGluZyBlbHNlIHRoYW4gdGhlIGZpZWxkSWQgZS5nIGNvbXBhbnlJZCBhbmQgbm90IGNvbXBhbnksIGVuY291bnRlcmVkOiAke2ZpZWxkTWV0YWRhdGFJdGVtLm5hbWV9YCxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgcmVsYXRpb25GaWVsZElkTmFtZSA9IGdldEZvcmVpZ25LZXlOYW1lRnJvbVJlbGF0aW9uRmllbGROYW1lKFxuICAgICAgZmllbGRNZXRhZGF0YUl0ZW0ubmFtZSxcbiAgICApO1xuICAgIGNvbnN0IHJlY29yZElucHV0RmllbGRJZFZhbHVlOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkID1cbiAgICAgIHJlY29yZElucHV0W3JlbGF0aW9uRmllbGRJZE5hbWVdO1xuXG4gICAgaWYgKGlzVW5kZWZpbmVkKHJlY29yZElucHV0RmllbGRJZFZhbHVlKSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgY29uc3QgcmVsYXRpb25JZEZpZWxkTWV0YWRhdGFJdGVtID0gb2JqZWN0TWV0YWRhdGFJdGVtLmZpZWxkcy5maW5kKFxuICAgICAgKGZpZWxkKSA9PiBmaWVsZC5uYW1lID09PSByZWxhdGlvbkZpZWxkSWROYW1lLFxuICAgICk7XG4gICAgaWYgKCFpc0RlZmluZWQocmVsYXRpb25JZEZpZWxkTWV0YWRhdGFJdGVtKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnU2hvdWxkIG5ldmVyIG9jY3VyLCBlbmNvdW50ZXJlZCB1bmtub3duIHJlbGF0aW9uSWQgd2l0aGluIHJlbGF0aW9ucyBkZWZpbml0aW9ucycsXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmIChpc051bGwocmVjb3JkSW5wdXRGaWVsZElkVmFsdWUpKSB7XG4gICAgICBvcHRpbWlzdGljUmVjb3JkW3JlbGF0aW9uRmllbGRJZE5hbWVdID0gbnVsbDtcbiAgICAgIG9wdGltaXN0aWNSZWNvcmRbZmllbGRNZXRhZGF0YUl0ZW0ubmFtZV0gPSBudWxsO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgY29uc3QgdGFyZ2V0TmFtZVNpbmd1bGFyID1cbiAgICAgIGZpZWxkTWV0YWRhdGFJdGVtLnJlbGF0aW9uRGVmaW5pdGlvbj8udGFyZ2V0T2JqZWN0TWV0YWRhdGEubmFtZVNpbmd1bGFyO1xuICAgIGNvbnN0IHRhcmdldE9iamVjdE1ldGF0YURhdGFJdGVtID0gb2JqZWN0TWV0YWRhdGFJdGVtcy5maW5kKFxuICAgICAgKHsgbmFtZVNpbmd1bGFyIH0pID0+IG5hbWVTaW5ndWxhciA9PT0gdGFyZ2V0TmFtZVNpbmd1bGFyLFxuICAgICk7XG4gICAgaWYgKCFpc0RlZmluZWQodGFyZ2V0T2JqZWN0TWV0YXRhRGF0YUl0ZW0pKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdTaG91bGQgbmV2ZXIgb2NjdXIsIGVuY291bnRlcmVkIGludmFsaWQgcmVsYXRpb24gZGVmaW5pdGlvbicsXG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnN0IGNhY2hlZFJlY29yZCA9IGdldFJlY29yZEZyb21DYWNoZSh7XG4gICAgICBjYWNoZSxcbiAgICAgIG9iamVjdE1ldGFkYXRhSXRlbTogdGFyZ2V0T2JqZWN0TWV0YXRhRGF0YUl0ZW0sXG4gICAgICBvYmplY3RNZXRhZGF0YUl0ZW1zLFxuICAgICAgcmVjb3JkSWQ6IHJlY29yZElucHV0RmllbGRJZFZhbHVlIGFzIHN0cmluZyxcbiAgICB9KTtcblxuICAgIG9wdGltaXN0aWNSZWNvcmRbcmVsYXRpb25GaWVsZElkTmFtZV0gPSByZWNvcmRJbnB1dEZpZWxkSWRWYWx1ZTtcblxuICAgIGlmICghaXNEZWZpbmVkKGNhY2hlZFJlY29yZCkgfHwgT2JqZWN0LmtleXMoY2FjaGVkUmVjb3JkKS5sZW5ndGggPD0gMCkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgb3B0aW1pc3RpY1JlY29yZFtmaWVsZE1ldGFkYXRhSXRlbS5uYW1lXSA9IGNhY2hlZFJlY29yZDtcbiAgfVxuXG4gIHJldHVybiBvcHRpbWlzdGljUmVjb3JkO1xufTtcbiJdLCJuYW1lcyI6WyJpc051bGwiLCJpc1VuZGVmaW5lZCIsImdldFJlY29yZEZyb21DYWNoZSIsIkdSQVBIUUxfVFlQRU5BTUVfS0VZIiwiaXNGaWVsZEFjdG9yIiwiaXNGaWVsZFJlbGF0aW9uIiwiaXNGaWVsZFV1aWQiLCJidWlsZE9wdGltaXN0aWNBY3RvckZpZWxkVmFsdWVGcm9tQ3VycmVudFdvcmtzcGFjZU1lbWJlciIsImdldEZvcmVpZ25LZXlOYW1lRnJvbVJlbGF0aW9uRmllbGROYW1lIiwiUmVsYXRpb25EZWZpbml0aW9uVHlwZSIsIkZpZWxkTWV0YWRhdGFUeXBlIiwiaXNEZWZpbmVkIiwiY29tcHV0ZU9wdGltaXN0aWNSZWNvcmRGcm9tSW5wdXQiLCJvYmplY3RNZXRhZGF0YUl0ZW0iLCJyZWNvcmRJbnB1dCIsImNhY2hlIiwib2JqZWN0TWV0YWRhdGFJdGVtcyIsImN1cnJlbnRXb3Jrc3BhY2VNZW1iZXIiLCJ1bmtub3duUmVjb3JkSW5wdXRGaWVsZHMiLCJPYmplY3QiLCJrZXlzIiwiZmlsdGVyIiwicmVjb3JkS2V5IiwiaXNVbmtub3duTWV0YWRhdGFJdGVtRmllbGQiLCJmaWVsZHMiLCJmaW5kIiwiZmllbGQiLCJuYW1lIiwidW5kZWZpbmVkIiwiaXNUeXBlbmFtZUZpZWxkIiwibGVuZ3RoIiwiRXJyb3IiLCJqb2luIiwibmFtZVNpbmd1bGFyIiwib3B0aW1pc3RpY1JlY29yZCIsImZpZWxkTWV0YWRhdGFJdGVtIiwicmVjb3JkSW5wdXRGaWVsZFZhbHVlIiwiaXNSZWxhdGlvbkZpZWxkSWQiLCJzb21lIiwidHlwZSIsInJlbGF0aW9uRGVmaW5pdGlvbiIsIlJFTEFUSU9OIiwic291cmNlRmllbGROYW1lIiwic291cmNlRmllbGRNZXRhZGF0YSIsImRlZmF1bHRBY3RvckZpZWxkVmFsdWUiLCJpc1JlbGF0aW9uRmllbGQiLCJpc051bGxhYmxlIiwiZGlyZWN0aW9uIiwiT05FX1RPX01BTlkiLCJpc01hbnlUb09uZVJlbGF0aW9uIiwiTUFOWV9UT19PTkUiLCJyZWxhdGlvbkZpZWxkSWROYW1lIiwicmVjb3JkSW5wdXRGaWVsZElkVmFsdWUiLCJyZWxhdGlvbklkRmllbGRNZXRhZGF0YUl0ZW0iLCJ0YXJnZXROYW1lU2luZ3VsYXIiLCJ0YXJnZXRPYmplY3RNZXRhZGF0YSIsInRhcmdldE9iamVjdE1ldGF0YURhdGFJdGVtIiwiY2FjaGVkUmVjb3JkIiwicmVjb3JkSWQiXSwibWFwcGluZ3MiOiJBQUFBLFNBQVNBLE1BQU0sRUFBRUMsV0FBVyxRQUFRLGlCQUFpQjtBQUlyRCxTQUNFQyxrQkFBa0IsUUFFYixpREFBaUQ7QUFDeEQsU0FBU0Msb0JBQW9CLFFBQVEsK0NBQStDO0FBRXBGLFNBQVNDLFlBQVksUUFBUSx5REFBeUQ7QUFDdEYsU0FBU0MsZUFBZSxRQUFRLDREQUE0RDtBQUM1RixTQUFTQyxXQUFXLFFBQVEsd0RBQXdEO0FBRXBGLFNBQVNDLHdEQUF3RCxRQUFRLGlGQUFpRjtBQUMxSixTQUFTQyxzQ0FBc0MsUUFBUSwrREFBK0Q7QUFDdEgsU0FBU0Msc0JBQXNCLFFBQVEsK0JBQStCO0FBQ3RFLFNBQVNDLGlCQUFpQixRQUFRLHNCQUFzQjtBQUN4RCxTQUFTQyxTQUFTLFFBQVEsc0JBQXNCO0FBT2hELE9BQU8sTUFBTUMsbUNBQW1DLENBQUMsRUFDL0NDLGtCQUFrQixFQUNsQkMsV0FBVyxFQUNYQyxLQUFLLEVBQ0xDLG1CQUFtQixFQUNuQkMsc0JBQXNCLEVBQ2dCO0lBQ3RDLE1BQU1DLDJCQUEyQkMsT0FBT0MsSUFBSSxDQUFDTixhQUFhTyxNQUFNLENBQzlELENBQUNDO1FBQ0MsTUFBTUMsNkJBQ0pWLG1CQUFtQlcsTUFBTSxDQUFDQyxJQUFJLENBQUMsQ0FBQ0MsUUFBVUEsTUFBTUMsSUFBSSxLQUFLTCxlQUN6RE07UUFDRixNQUFNQyxrQkFBa0JQLGNBQWNuQjtRQUN0QyxPQUFPb0IsOEJBQThC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