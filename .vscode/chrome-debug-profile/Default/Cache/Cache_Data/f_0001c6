import { contextStoreTargetedRecordsRuleComponentState } from "/src/modules/context-store/states/contextStoreTargetedRecordsRuleComponentState.ts";
import { availableFieldMetadataItemsForFilterFamilySelector } from "/src/modules/object-metadata/states/availableFieldMetadataItemsForFilterFamilySelector.ts";
import { availableFieldMetadataItemsForSortFamilySelector } from "/src/modules/object-metadata/states/availableFieldMetadataItemsForSortFamilySelector.ts";
import { formatFieldMetadataItemAsColumnDefinition } from "/src/modules/object-metadata/utils/formatFieldMetadataItemAsColumnDefinition.ts";
import { useSetRecordGroups } from "/src/modules/object-record/record-group/hooks/useSetRecordGroups.ts";
import { recordIndexFieldDefinitionsState } from "/src/modules/object-record/record-index/states/recordIndexFieldDefinitionsState.ts";
import { recordIndexIsCompactModeActiveState } from "/src/modules/object-record/record-index/states/recordIndexIsCompactModeActiveState.ts";
import { recordIndexKanbanAggregateOperationState } from "/src/modules/object-record/record-index/states/recordIndexKanbanAggregateOperationState.ts";
import { recordIndexKanbanFieldMetadataIdState } from "/src/modules/object-record/record-index/states/recordIndexKanbanFieldMetadataIdState.ts";
import { recordIndexOpenRecordInState } from "/src/modules/object-record/record-index/states/recordIndexOpenRecordInState.ts";
import { recordIndexViewTypeState } from "/src/modules/object-record/record-index/states/recordIndexViewTypeState.ts";
import { useSetTableColumns } from "/src/modules/object-record/record-table/hooks/useSetTableColumns.ts";
import { viewFieldAggregateOperationState } from "/src/modules/object-record/record-table/record-table-footer/states/viewFieldAggregateOperationState.ts";
import { convertAggregateOperationToExtendedAggregateOperation } from "/src/modules/object-record/utils/convertAggregateOperationToExtendedAggregateOperation.ts";
import { filterAvailableTableColumns } from "/src/modules/object-record/utils/filterAvailableTableColumns.ts";
import { getRecordIndexIdFromObjectNamePluralAndViewId } from "/src/modules/object-record/utils/getRecordIndexIdFromObjectNamePluralAndViewId.ts";
import { useSetRecoilComponentStateV2 } from "/src/modules/ui/utilities/state/component-state/hooks/useSetRecoilComponentStateV2.ts";
import { mapViewFieldsToColumnDefinitions } from "/src/modules/views/utils/mapViewFieldsToColumnDefinitions.ts";
import { mapViewFiltersToFilters } from "/src/modules/views/utils/mapViewFiltersToFilters.ts";
import { useRecoilCallback, useSetRecoilState } from "/@fs/D:/twenty-table-o/node_modules/.vite/packages/twenty-front/deps/recoil.js?v=226f7286";
import { isDeeplyEqual } from "/src/utils/isDeeplyEqual.ts";
import { isDefined } from "/@fs/D:/twenty-table-o/packages/twenty-shared/utils/dist/twenty-shared-utils.esm.js";
export const useLoadRecordIndexStates = ()=>{
    const setContextStoreTargetedRecordsRuleComponentState = useSetRecoilComponentStateV2(contextStoreTargetedRecordsRuleComponentState);
    const setRecordIndexIsCompactModeActive = useSetRecoilState(recordIndexIsCompactModeActiveState);
    const setRecordIndexViewType = useSetRecoilState(recordIndexViewTypeState);
    const setRecordIndexOpenRecordIn = useSetRecoilState(recordIndexOpenRecordInState);
    const setRecordIndexViewKanbanFieldMetadataIdState = useSetRecoilState(recordIndexKanbanFieldMetadataIdState);
    const setRecordIndexViewKanbanAggregateOperationState = useSetRecoilState(recordIndexKanbanAggregateOperationState);
    const { setRecordGroupsFromViewGroups } = useSetRecordGroups();
    const { setTableColumns } = useSetTableColumns();
    const onViewFieldsChange = useRecoilCallback(({ set, snapshot })=>(viewFields, objectMetadataItem, recordIndexId)=>{
            const activeFieldMetadataItems = objectMetadataItem.fields.filter(({ isActive, isSystem })=>isActive && !isSystem);
            const filterableFieldMetadataItems = snapshot.getLoadable(availableFieldMetadataItemsForFilterFamilySelector({
                objectMetadataItemId: objectMetadataItem.id
            })).getValue();
            const sortableFieldMetadataItems = snapshot.getLoadable(availableFieldMetadataItemsForSortFamilySelector({
                objectMetadataItemId: objectMetadataItem.id
            })).getValue();
            const columnDefinitions = activeFieldMetadataItems.map((field, index)=>formatFieldMetadataItemAsColumnDefinition({
                    position: index,
                    field,
                    objectMetadataItem
                })).filter(filterAvailableTableColumns).map((column)=>{
                const existsInFilterDefinitions = filterableFieldMetadataItems.some((fieldMetadataItem)=>fieldMetadataItem.id === column.fieldMetadataId);
                const existsInSortDefinitions = sortableFieldMetadataItems.some((fieldMetadataItem)=>fieldMetadataItem.id === column.fieldMetadataId);
                return {
                    ...column,
                    isFilterable: existsInFilterDefinitions,
                    isSortable: existsInSortDefinitions
                };
            });
            const newFieldDefinitions = mapViewFieldsToColumnDefinitions({
                viewFields,
                columnDefinitions
            });
            setTableColumns(newFieldDefinitions, recordIndexId);
            const existingRecordIndexFieldDefinitions = snapshot.getLoadable(recordIndexFieldDefinitionsState).getValue();
            if (!isDeeplyEqual(existingRecordIndexFieldDefinitions, newFieldDefinitions)) {
                set(recordIndexFieldDefinitionsState, newFieldDefinitions);
            }
            for (const viewField of viewFields){
                const viewFieldMetadataType = objectMetadataItem.fields?.find((field)=>field.id === viewField.fieldMetadataId)?.type;
                const aggregateOperationForViewField = snapshot.getLoadable(viewFieldAggregateOperationState({
                    viewFieldId: viewField.id
                })).getValue();
                const convertedViewFieldAggregateOperation = isDefined(viewField.aggregateOperation) ? convertAggregateOperationToExtendedAggregateOperation(viewField.aggregateOperation, viewFieldMetadataType) : viewField.aggregateOperation;
                if (aggregateOperationForViewField !== convertedViewFieldAggregateOperation) {
                    set(viewFieldAggregateOperationState({
                        viewFieldId: viewField.id
                    }), convertedViewFieldAggregateOperation);
                }
            }
        }, [
        setTableColumns
    ]);
    const loadRecordIndexStates = useRecoilCallback(({ snapshot })=>async (view, objectMetadataItem)=>{
            const recordIndexId = getRecordIndexIdFromObjectNamePluralAndViewId(objectMetadataItem.namePlural, view.id);
            const filterableFieldMetadataItems = snapshot.getLoadable(availableFieldMetadataItemsForFilterFamilySelector({
                objectMetadataItemId: objectMetadataItem.id
            })).getValue();
            onViewFieldsChange(view.viewFields, objectMetadataItem, recordIndexId);
            setRecordGroupsFromViewGroups(view.id, view.viewGroups, objectMetadataItem);
            setContextStoreTargetedRecordsRuleComponentState((prev)=>({
                    ...prev,
                    filters: mapViewFiltersToFilters(view.viewFilters, filterableFieldMetadataItems)
                }));
            setRecordIndexViewType(view.type);
            setRecordIndexOpenRecordIn(view.openRecordIn);
            setRecordIndexViewKanbanFieldMetadataIdState(view.kanbanFieldMetadataId);
            const kanbanAggregateOperationFieldMetadataType = objectMetadataItem.fields?.find((field)=>field.id === view.kanbanAggregateOperationFieldMetadataId)?.type;
            setRecordIndexViewKanbanAggregateOperationState({
                operation: isDefined(view.kanbanAggregateOperation) ? convertAggregateOperationToExtendedAggregateOperation(view.kanbanAggregateOperation, kanbanAggregateOperationFieldMetadataType) : view.kanbanAggregateOperation,
                fieldMetadataId: view.kanbanAggregateOperationFieldMetadataId
            });
            setRecordIndexIsCompactModeActive(view.isCompact);
        }, [
        onViewFieldsChange,
        setRecordGroupsFromViewGroups,
        setContextStoreTargetedRecordsRuleComponentState,
        setRecordIndexIsCompactModeActive,
        setRecordIndexViewKanbanAggregateOperationState,
        setRecordIndexViewKanbanFieldMetadataIdState,
        setRecordIndexViewType,
        setRecordIndexOpenRecordIn
    ]);
    return {
        loadRecordIndexStates
    };
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZUxvYWRSZWNvcmRJbmRleFN0YXRlcy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjb250ZXh0U3RvcmVUYXJnZXRlZFJlY29yZHNSdWxlQ29tcG9uZW50U3RhdGUgfSBmcm9tICdAL2NvbnRleHQtc3RvcmUvc3RhdGVzL2NvbnRleHRTdG9yZVRhcmdldGVkUmVjb3Jkc1J1bGVDb21wb25lbnRTdGF0ZSc7XG5pbXBvcnQgeyBhdmFpbGFibGVGaWVsZE1ldGFkYXRhSXRlbXNGb3JGaWx0ZXJGYW1pbHlTZWxlY3RvciB9IGZyb20gJ0Avb2JqZWN0LW1ldGFkYXRhL3N0YXRlcy9hdmFpbGFibGVGaWVsZE1ldGFkYXRhSXRlbXNGb3JGaWx0ZXJGYW1pbHlTZWxlY3Rvcic7XG5pbXBvcnQgeyBhdmFpbGFibGVGaWVsZE1ldGFkYXRhSXRlbXNGb3JTb3J0RmFtaWx5U2VsZWN0b3IgfSBmcm9tICdAL29iamVjdC1tZXRhZGF0YS9zdGF0ZXMvYXZhaWxhYmxlRmllbGRNZXRhZGF0YUl0ZW1zRm9yU29ydEZhbWlseVNlbGVjdG9yJztcbmltcG9ydCB7IE9iamVjdE1ldGFkYXRhSXRlbSB9IGZyb20gJ0Avb2JqZWN0LW1ldGFkYXRhL3R5cGVzL09iamVjdE1ldGFkYXRhSXRlbSc7XG5pbXBvcnQgeyBmb3JtYXRGaWVsZE1ldGFkYXRhSXRlbUFzQ29sdW1uRGVmaW5pdGlvbiB9IGZyb20gJ0Avb2JqZWN0LW1ldGFkYXRhL3V0aWxzL2Zvcm1hdEZpZWxkTWV0YWRhdGFJdGVtQXNDb2x1bW5EZWZpbml0aW9uJztcbmltcG9ydCB7IEZpZWxkTWV0YWRhdGEgfSBmcm9tICdAL29iamVjdC1yZWNvcmQvcmVjb3JkLWZpZWxkL3R5cGVzL0ZpZWxkTWV0YWRhdGEnO1xuaW1wb3J0IHsgdXNlU2V0UmVjb3JkR3JvdXBzIH0gZnJvbSAnQC9vYmplY3QtcmVjb3JkL3JlY29yZC1ncm91cC9ob29rcy91c2VTZXRSZWNvcmRHcm91cHMnO1xuaW1wb3J0IHsgcmVjb3JkSW5kZXhGaWVsZERlZmluaXRpb25zU3RhdGUgfSBmcm9tICdAL29iamVjdC1yZWNvcmQvcmVjb3JkLWluZGV4L3N0YXRlcy9yZWNvcmRJbmRleEZpZWxkRGVmaW5pdGlvbnNTdGF0ZSc7XG5pbXBvcnQgeyByZWNvcmRJbmRleElzQ29tcGFjdE1vZGVBY3RpdmVTdGF0ZSB9IGZyb20gJ0Avb2JqZWN0LXJlY29yZC9yZWNvcmQtaW5kZXgvc3RhdGVzL3JlY29yZEluZGV4SXNDb21wYWN0TW9kZUFjdGl2ZVN0YXRlJztcbmltcG9ydCB7IHJlY29yZEluZGV4S2FuYmFuQWdncmVnYXRlT3BlcmF0aW9uU3RhdGUgfSBmcm9tICdAL29iamVjdC1yZWNvcmQvcmVjb3JkLWluZGV4L3N0YXRlcy9yZWNvcmRJbmRleEthbmJhbkFnZ3JlZ2F0ZU9wZXJhdGlvblN0YXRlJztcbmltcG9ydCB7IHJlY29yZEluZGV4S2FuYmFuRmllbGRNZXRhZGF0YUlkU3RhdGUgfSBmcm9tICdAL29iamVjdC1yZWNvcmQvcmVjb3JkLWluZGV4L3N0YXRlcy9yZWNvcmRJbmRleEthbmJhbkZpZWxkTWV0YWRhdGFJZFN0YXRlJztcbmltcG9ydCB7IHJlY29yZEluZGV4T3BlblJlY29yZEluU3RhdGUgfSBmcm9tICdAL29iamVjdC1yZWNvcmQvcmVjb3JkLWluZGV4L3N0YXRlcy9yZWNvcmRJbmRleE9wZW5SZWNvcmRJblN0YXRlJztcbmltcG9ydCB7IHJlY29yZEluZGV4Vmlld1R5cGVTdGF0ZSB9IGZyb20gJ0Avb2JqZWN0LXJlY29yZC9yZWNvcmQtaW5kZXgvc3RhdGVzL3JlY29yZEluZGV4Vmlld1R5cGVTdGF0ZSc7XG5pbXBvcnQgeyB1c2VTZXRUYWJsZUNvbHVtbnMgfSBmcm9tICdAL29iamVjdC1yZWNvcmQvcmVjb3JkLXRhYmxlL2hvb2tzL3VzZVNldFRhYmxlQ29sdW1ucyc7XG5pbXBvcnQgeyB2aWV3RmllbGRBZ2dyZWdhdGVPcGVyYXRpb25TdGF0ZSB9IGZyb20gJ0Avb2JqZWN0LXJlY29yZC9yZWNvcmQtdGFibGUvcmVjb3JkLXRhYmxlLWZvb3Rlci9zdGF0ZXMvdmlld0ZpZWxkQWdncmVnYXRlT3BlcmF0aW9uU3RhdGUnO1xuaW1wb3J0IHsgQ29sdW1uRGVmaW5pdGlvbiB9IGZyb20gJ0Avb2JqZWN0LXJlY29yZC9yZWNvcmQtdGFibGUvdHlwZXMvQ29sdW1uRGVmaW5pdGlvbic7XG5pbXBvcnQgeyBjb252ZXJ0QWdncmVnYXRlT3BlcmF0aW9uVG9FeHRlbmRlZEFnZ3JlZ2F0ZU9wZXJhdGlvbiB9IGZyb20gJ0Avb2JqZWN0LXJlY29yZC91dGlscy9jb252ZXJ0QWdncmVnYXRlT3BlcmF0aW9uVG9FeHRlbmRlZEFnZ3JlZ2F0ZU9wZXJhdGlvbic7XG5pbXBvcnQgeyBmaWx0ZXJBdmFpbGFibGVUYWJsZUNvbHVtbnMgfSBmcm9tICdAL29iamVjdC1yZWNvcmQvdXRpbHMvZmlsdGVyQXZhaWxhYmxlVGFibGVDb2x1bW5zJztcbmltcG9ydCB7IGdldFJlY29yZEluZGV4SWRGcm9tT2JqZWN0TmFtZVBsdXJhbEFuZFZpZXdJZCB9IGZyb20gJ0Avb2JqZWN0LXJlY29yZC91dGlscy9nZXRSZWNvcmRJbmRleElkRnJvbU9iamVjdE5hbWVQbHVyYWxBbmRWaWV3SWQnO1xuaW1wb3J0IHsgdXNlU2V0UmVjb2lsQ29tcG9uZW50U3RhdGVWMiB9IGZyb20gJ0AvdWkvdXRpbGl0aWVzL3N0YXRlL2NvbXBvbmVudC1zdGF0ZS9ob29rcy91c2VTZXRSZWNvaWxDb21wb25lbnRTdGF0ZVYyJztcbmltcG9ydCB7IFZpZXcgfSBmcm9tICdAL3ZpZXdzL3R5cGVzL1ZpZXcnO1xuaW1wb3J0IHsgVmlld0ZpZWxkIH0gZnJvbSAnQC92aWV3cy90eXBlcy9WaWV3RmllbGQnO1xuaW1wb3J0IHsgbWFwVmlld0ZpZWxkc1RvQ29sdW1uRGVmaW5pdGlvbnMgfSBmcm9tICdAL3ZpZXdzL3V0aWxzL21hcFZpZXdGaWVsZHNUb0NvbHVtbkRlZmluaXRpb25zJztcbmltcG9ydCB7IG1hcFZpZXdGaWx0ZXJzVG9GaWx0ZXJzIH0gZnJvbSAnQC92aWV3cy91dGlscy9tYXBWaWV3RmlsdGVyc1RvRmlsdGVycyc7XG5pbXBvcnQgeyB1c2VSZWNvaWxDYWxsYmFjaywgdXNlU2V0UmVjb2lsU3RhdGUgfSBmcm9tICdyZWNvaWwnO1xuaW1wb3J0IHsgaXNEZWVwbHlFcXVhbCB9IGZyb20gJ34vdXRpbHMvaXNEZWVwbHlFcXVhbCc7XG5pbXBvcnQgeyBpc0RlZmluZWQgfSBmcm9tICd0d2VudHktc2hhcmVkL3V0aWxzJztcblxuZXhwb3J0IGNvbnN0IHVzZUxvYWRSZWNvcmRJbmRleFN0YXRlcyA9ICgpID0+IHtcbiAgY29uc3Qgc2V0Q29udGV4dFN0b3JlVGFyZ2V0ZWRSZWNvcmRzUnVsZUNvbXBvbmVudFN0YXRlID1cbiAgICB1c2VTZXRSZWNvaWxDb21wb25lbnRTdGF0ZVYyKGNvbnRleHRTdG9yZVRhcmdldGVkUmVjb3Jkc1J1bGVDb21wb25lbnRTdGF0ZSk7XG5cbiAgY29uc3Qgc2V0UmVjb3JkSW5kZXhJc0NvbXBhY3RNb2RlQWN0aXZlID0gdXNlU2V0UmVjb2lsU3RhdGUoXG4gICAgcmVjb3JkSW5kZXhJc0NvbXBhY3RNb2RlQWN0aXZlU3RhdGUsXG4gICk7XG4gIGNvbnN0IHNldFJlY29yZEluZGV4Vmlld1R5cGUgPSB1c2VTZXRSZWNvaWxTdGF0ZShyZWNvcmRJbmRleFZpZXdUeXBlU3RhdGUpO1xuICBjb25zdCBzZXRSZWNvcmRJbmRleE9wZW5SZWNvcmRJbiA9IHVzZVNldFJlY29pbFN0YXRlKFxuICAgIHJlY29yZEluZGV4T3BlblJlY29yZEluU3RhdGUsXG4gICk7XG4gIGNvbnN0IHNldFJlY29yZEluZGV4Vmlld0thbmJhbkZpZWxkTWV0YWRhdGFJZFN0YXRlID0gdXNlU2V0UmVjb2lsU3RhdGUoXG4gICAgcmVjb3JkSW5kZXhLYW5iYW5GaWVsZE1ldGFkYXRhSWRTdGF0ZSxcbiAgKTtcbiAgY29uc3Qgc2V0UmVjb3JkSW5kZXhWaWV3S2FuYmFuQWdncmVnYXRlT3BlcmF0aW9uU3RhdGUgPSB1c2VTZXRSZWNvaWxTdGF0ZShcbiAgICByZWNvcmRJbmRleEthbmJhbkFnZ3JlZ2F0ZU9wZXJhdGlvblN0YXRlLFxuICApO1xuICBjb25zdCB7IHNldFJlY29yZEdyb3Vwc0Zyb21WaWV3R3JvdXBzIH0gPSB1c2VTZXRSZWNvcmRHcm91cHMoKTtcblxuICBjb25zdCB7IHNldFRhYmxlQ29sdW1ucyB9ID0gdXNlU2V0VGFibGVDb2x1bW5zKCk7XG5cbiAgY29uc3Qgb25WaWV3RmllbGRzQ2hhbmdlID0gdXNlUmVjb2lsQ2FsbGJhY2soXG4gICAgKHsgc2V0LCBzbmFwc2hvdCB9KSA9PlxuICAgICAgKFxuICAgICAgICB2aWV3RmllbGRzOiBWaWV3RmllbGRbXSxcbiAgICAgICAgb2JqZWN0TWV0YWRhdGFJdGVtOiBPYmplY3RNZXRhZGF0YUl0ZW0sXG4gICAgICAgIHJlY29yZEluZGV4SWQ6IHN0cmluZyxcbiAgICAgICkgPT4ge1xuICAgICAgICBjb25zdCBhY3RpdmVGaWVsZE1ldGFkYXRhSXRlbXMgPSBvYmplY3RNZXRhZGF0YUl0ZW0uZmllbGRzLmZpbHRlcihcbiAgICAgICAgICAoeyBpc0FjdGl2ZSwgaXNTeXN0ZW0gfSkgPT4gaXNBY3RpdmUgJiYgIWlzU3lzdGVtLFxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGZpbHRlcmFibGVGaWVsZE1ldGFkYXRhSXRlbXMgPSBzbmFwc2hvdFxuICAgICAgICAgIC5nZXRMb2FkYWJsZShcbiAgICAgICAgICAgIGF2YWlsYWJsZUZpZWxkTWV0YWRhdGFJdGVtc0ZvckZpbHRlckZhbWlseVNlbGVjdG9yKHtcbiAgICAgICAgICAgICAgb2JqZWN0TWV0YWRhdGFJdGVtSWQ6IG9iamVjdE1ldGFkYXRhSXRlbS5pZCxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIClcbiAgICAgICAgICAuZ2V0VmFsdWUoKTtcblxuICAgICAgICBjb25zdCBzb3J0YWJsZUZpZWxkTWV0YWRhdGFJdGVtcyA9IHNuYXBzaG90XG4gICAgICAgICAgLmdldExvYWRhYmxlKFxuICAgICAgICAgICAgYXZhaWxhYmxlRmllbGRNZXRhZGF0YUl0ZW1zRm9yU29ydEZhbWlseVNlbGVjdG9yKHtcbiAgICAgICAgICAgICAgb2JqZWN0TWV0YWRhdGFJdGVtSWQ6IG9iamVjdE1ldGFkYXRhSXRlbS5pZCxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIClcbiAgICAgICAgICAuZ2V0VmFsdWUoKTtcblxuICAgICAgICBjb25zdCBjb2x1bW5EZWZpbml0aW9uczogQ29sdW1uRGVmaW5pdGlvbjxGaWVsZE1ldGFkYXRhPltdID1cbiAgICAgICAgICBhY3RpdmVGaWVsZE1ldGFkYXRhSXRlbXNcbiAgICAgICAgICAgIC5tYXAoKGZpZWxkLCBpbmRleCkgPT5cbiAgICAgICAgICAgICAgZm9ybWF0RmllbGRNZXRhZGF0YUl0ZW1Bc0NvbHVtbkRlZmluaXRpb24oe1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBpbmRleCxcbiAgICAgICAgICAgICAgICBmaWVsZCxcbiAgICAgICAgICAgICAgICBvYmplY3RNZXRhZGF0YUl0ZW0sXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgLmZpbHRlcihmaWx0ZXJBdmFpbGFibGVUYWJsZUNvbHVtbnMpXG4gICAgICAgICAgICAubWFwKChjb2x1bW4pID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgZXhpc3RzSW5GaWx0ZXJEZWZpbml0aW9ucyA9XG4gICAgICAgICAgICAgICAgZmlsdGVyYWJsZUZpZWxkTWV0YWRhdGFJdGVtcy5zb21lKFxuICAgICAgICAgICAgICAgICAgKGZpZWxkTWV0YWRhdGFJdGVtKSA9PlxuICAgICAgICAgICAgICAgICAgICBmaWVsZE1ldGFkYXRhSXRlbS5pZCA9PT0gY29sdW1uLmZpZWxkTWV0YWRhdGFJZCxcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgIGNvbnN0IGV4aXN0c0luU29ydERlZmluaXRpb25zID0gc29ydGFibGVGaWVsZE1ldGFkYXRhSXRlbXMuc29tZShcbiAgICAgICAgICAgICAgICAoZmllbGRNZXRhZGF0YUl0ZW0pID0+XG4gICAgICAgICAgICAgICAgICBmaWVsZE1ldGFkYXRhSXRlbS5pZCA9PT0gY29sdW1uLmZpZWxkTWV0YWRhdGFJZCxcbiAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIC4uLmNvbHVtbixcbiAgICAgICAgICAgICAgICBpc0ZpbHRlcmFibGU6IGV4aXN0c0luRmlsdGVyRGVmaW5pdGlvbnMsXG4gICAgICAgICAgICAgICAgaXNTb3J0YWJsZTogZXhpc3RzSW5Tb3J0RGVmaW5pdGlvbnMsXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBuZXdGaWVsZERlZmluaXRpb25zID0gbWFwVmlld0ZpZWxkc1RvQ29sdW1uRGVmaW5pdGlvbnMoe1xuICAgICAgICAgIHZpZXdGaWVsZHMsXG4gICAgICAgICAgY29sdW1uRGVmaW5pdGlvbnMsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHNldFRhYmxlQ29sdW1ucyhuZXdGaWVsZERlZmluaXRpb25zLCByZWNvcmRJbmRleElkKTtcblxuICAgICAgICBjb25zdCBleGlzdGluZ1JlY29yZEluZGV4RmllbGREZWZpbml0aW9ucyA9IHNuYXBzaG90XG4gICAgICAgICAgLmdldExvYWRhYmxlKHJlY29yZEluZGV4RmllbGREZWZpbml0aW9uc1N0YXRlKVxuICAgICAgICAgIC5nZXRWYWx1ZSgpO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgIWlzRGVlcGx5RXF1YWwoXG4gICAgICAgICAgICBleGlzdGluZ1JlY29yZEluZGV4RmllbGREZWZpbml0aW9ucyxcbiAgICAgICAgICAgIG5ld0ZpZWxkRGVmaW5pdGlvbnMsXG4gICAgICAgICAgKVxuICAgICAgICApIHtcbiAgICAgICAgICBzZXQocmVjb3JkSW5kZXhGaWVsZERlZmluaXRpb25zU3RhdGUsIG5ld0ZpZWxkRGVmaW5pdGlvbnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChjb25zdCB2aWV3RmllbGQgb2Ygdmlld0ZpZWxkcykge1xuICAgICAgICAgIGNvbnN0IHZpZXdGaWVsZE1ldGFkYXRhVHlwZSA9IG9iamVjdE1ldGFkYXRhSXRlbS5maWVsZHM/LmZpbmQoXG4gICAgICAgICAgICAoZmllbGQpID0+IGZpZWxkLmlkID09PSB2aWV3RmllbGQuZmllbGRNZXRhZGF0YUlkLFxuICAgICAgICAgICk/LnR5cGU7XG5cbiAgICAgICAgICBjb25zdCBhZ2dyZWdhdGVPcGVyYXRpb25Gb3JWaWV3RmllbGQgPSBzbmFwc2hvdFxuICAgICAgICAgICAgLmdldExvYWRhYmxlKFxuICAgICAgICAgICAgICB2aWV3RmllbGRBZ2dyZWdhdGVPcGVyYXRpb25TdGF0ZSh7XG4gICAgICAgICAgICAgICAgdmlld0ZpZWxkSWQ6IHZpZXdGaWVsZC5pZCxcbiAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICApXG4gICAgICAgICAgICAuZ2V0VmFsdWUoKTtcbiAgICAgICAgICBjb25zdCBjb252ZXJ0ZWRWaWV3RmllbGRBZ2dyZWdhdGVPcGVyYXRpb24gPSBpc0RlZmluZWQoXG4gICAgICAgICAgICB2aWV3RmllbGQuYWdncmVnYXRlT3BlcmF0aW9uLFxuICAgICAgICAgIClcbiAgICAgICAgICAgID8gY29udmVydEFnZ3JlZ2F0ZU9wZXJhdGlvblRvRXh0ZW5kZWRBZ2dyZWdhdGVPcGVyYXRpb24oXG4gICAgICAgICAgICAgICAgdmlld0ZpZWxkLmFnZ3JlZ2F0ZU9wZXJhdGlvbixcbiAgICAgICAgICAgICAgICB2aWV3RmllbGRNZXRhZGF0YVR5cGUsXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIDogdmlld0ZpZWxkLmFnZ3JlZ2F0ZU9wZXJhdGlvbjtcblxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGFnZ3JlZ2F0ZU9wZXJhdGlvbkZvclZpZXdGaWVsZCAhPT1cbiAgICAgICAgICAgIGNvbnZlcnRlZFZpZXdGaWVsZEFnZ3JlZ2F0ZU9wZXJhdGlvblxuICAgICAgICAgICkge1xuICAgICAgICAgICAgc2V0KFxuICAgICAgICAgICAgICB2aWV3RmllbGRBZ2dyZWdhdGVPcGVyYXRpb25TdGF0ZSh7XG4gICAgICAgICAgICAgICAgdmlld0ZpZWxkSWQ6IHZpZXdGaWVsZC5pZCxcbiAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIGNvbnZlcnRlZFZpZXdGaWVsZEFnZ3JlZ2F0ZU9wZXJhdGlvbixcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgIFtzZXRUYWJsZUNvbHVtbnNdLFxuICApO1xuXG4gIGNvbnN0IGxvYWRSZWNvcmRJbmRleFN0YXRlcyA9IHVzZVJlY29pbENhbGxiYWNrKFxuICAgICh7IHNuYXBzaG90IH0pID0+XG4gICAgICBhc3luYyAodmlldzogVmlldywgb2JqZWN0TWV0YWRhdGFJdGVtOiBPYmplY3RNZXRhZGF0YUl0ZW0pID0+IHtcbiAgICAgICAgY29uc3QgcmVjb3JkSW5kZXhJZCA9IGdldFJlY29yZEluZGV4SWRGcm9tT2JqZWN0TmFtZVBsdXJhbEFuZFZpZXdJZChcbiAgICAgICAgICBvYmplY3RNZXRhZGF0YUl0ZW0ubmFtZVBsdXJhbCxcbiAgICAgICAgICB2aWV3LmlkLFxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGZpbHRlcmFibGVGaWVsZE1ldGFkYXRhSXRlbXMgPSBzbmFwc2hvdFxuICAgICAgICAgIC5nZXRMb2FkYWJsZShcbiAgICAgICAgICAgIGF2YWlsYWJsZUZpZWxkTWV0YWRhdGFJdGVtc0ZvckZpbHRlckZhbWlseVNlbGVjdG9yKHtcbiAgICAgICAgICAgICAgb2JqZWN0TWV0YWRhdGFJdGVtSWQ6IG9iamVjdE1ldGFkYXRhSXRlbS5pZCxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIClcbiAgICAgICAgICAuZ2V0VmFsdWUoKTtcblxuICAgICAgICBvblZpZXdGaWVsZHNDaGFuZ2Uodmlldy52aWV3RmllbGRzLCBvYmplY3RNZXRhZGF0YUl0ZW0sIHJlY29yZEluZGV4SWQpO1xuXG4gICAgICAgIHNldFJlY29yZEdyb3Vwc0Zyb21WaWV3R3JvdXBzKFxuICAgICAgICAgIHZpZXcuaWQsXG4gICAgICAgICAgdmlldy52aWV3R3JvdXBzLFxuICAgICAgICAgIG9iamVjdE1ldGFkYXRhSXRlbSxcbiAgICAgICAgKTtcblxuICAgICAgICBzZXRDb250ZXh0U3RvcmVUYXJnZXRlZFJlY29yZHNSdWxlQ29tcG9uZW50U3RhdGUoKHByZXYpID0+ICh7XG4gICAgICAgICAgLi4ucHJldixcbiAgICAgICAgICBmaWx0ZXJzOiBtYXBWaWV3RmlsdGVyc1RvRmlsdGVycyhcbiAgICAgICAgICAgIHZpZXcudmlld0ZpbHRlcnMsXG4gICAgICAgICAgICBmaWx0ZXJhYmxlRmllbGRNZXRhZGF0YUl0ZW1zLFxuICAgICAgICAgICksXG4gICAgICAgIH0pKTtcblxuICAgICAgICBzZXRSZWNvcmRJbmRleFZpZXdUeXBlKHZpZXcudHlwZSk7XG4gICAgICAgIHNldFJlY29yZEluZGV4T3BlblJlY29yZEluKHZpZXcub3BlblJlY29yZEluKTtcbiAgICAgICAgc2V0UmVjb3JkSW5kZXhWaWV3S2FuYmFuRmllbGRNZXRhZGF0YUlkU3RhdGUoXG4gICAgICAgICAgdmlldy5rYW5iYW5GaWVsZE1ldGFkYXRhSWQsXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGthbmJhbkFnZ3JlZ2F0ZU9wZXJhdGlvbkZpZWxkTWV0YWRhdGFUeXBlID1cbiAgICAgICAgICBvYmplY3RNZXRhZGF0YUl0ZW0uZmllbGRzPy5maW5kKFxuICAgICAgICAgICAgKGZpZWxkKSA9PlxuICAgICAgICAgICAgICBmaWVsZC5pZCA9PT0gdmlldy5rYW5iYW5BZ2dyZWdhdGVPcGVyYXRpb25GaWVsZE1ldGFkYXRhSWQsXG4gICAgICAgICAgKT8udHlwZTtcbiAgICAgICAgc2V0UmVjb3JkSW5kZXhWaWV3S2FuYmFuQWdncmVnYXRlT3BlcmF0aW9uU3RhdGUoe1xuICAgICAgICAgIG9wZXJhdGlvbjogaXNEZWZpbmVkKHZpZXcua2FuYmFuQWdncmVnYXRlT3BlcmF0aW9uKVxuICAgICAgICAgICAgPyBjb252ZXJ0QWdncmVnYXRlT3BlcmF0aW9uVG9FeHRlbmRlZEFnZ3JlZ2F0ZU9wZXJhdGlvbihcbiAgICAgICAgICAgICAgICB2aWV3LmthbmJhbkFnZ3JlZ2F0ZU9wZXJhdGlvbixcbiAgICAgICAgICAgICAgICBrYW5iYW5BZ2dyZWdhdGVPcGVyYXRpb25GaWVsZE1ldGFkYXRhVHlwZSxcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgOiB2aWV3LmthbmJhbkFnZ3JlZ2F0ZU9wZXJhdGlvbixcbiAgICAgICAgICBmaWVsZE1ldGFkYXRhSWQ6IHZpZXcua2FuYmFuQWdncmVnYXRlT3BlcmF0aW9uRmllbGRNZXRhZGF0YUlkLFxuICAgICAgICB9KTtcbiAgICAgICAgc2V0UmVjb3JkSW5kZXhJc0NvbXBhY3RNb2RlQWN0aXZlKHZpZXcuaXNDb21wYWN0KTtcbiAgICAgIH0sXG4gICAgW1xuICAgICAgb25WaWV3RmllbGRzQ2hhbmdlLFxuICAgICAgc2V0UmVjb3JkR3JvdXBzRnJvbVZpZXdHcm91cHMsXG4gICAgICBzZXRDb250ZXh0U3RvcmVUYXJnZXRlZFJlY29yZHNSdWxlQ29tcG9uZW50U3RhdGUsXG4gICAgICBzZXRSZWNvcmRJbmRleElzQ29tcGFjdE1vZGVBY3RpdmUsXG4gICAgICBzZXRSZWNvcmRJbmRleFZpZXdLYW5iYW5BZ2dyZWdhdGVPcGVyYXRpb25TdGF0ZSxcbiAgICAgIHNldFJlY29yZEluZGV4Vmlld0thbmJhbkZpZWxkTWV0YWRhdGFJZFN0YXRlLFxuICAgICAgc2V0UmVjb3JkSW5kZXhWaWV3VHlwZSxcbiAgICAgIHNldFJlY29yZEluZGV4T3BlblJlY29yZEluLFxuICAgIF0sXG4gICk7XG5cbiAgcmV0dXJuIHtcbiAgICBsb2FkUmVjb3JkSW5kZXhTdGF0ZXMsXG4gIH07XG59O1xuIl0sIm5hbWVzIjpbImNvbnRleHRTdG9yZVRhcmdldGVkUmVjb3Jkc1J1bGVDb21wb25lbnRTdGF0ZSIsImF2YWlsYWJsZUZpZWxkTWV0YWRhdGFJdGVtc0ZvckZpbHRlckZhbWlseVNlbGVjdG9yIiwiYXZhaWxhYmxlRmllbGRNZXRhZGF0YUl0ZW1zRm9yU29ydEZhbWlseVNlbGVjdG9yIiwiZm9ybWF0RmllbGRNZXRhZGF0YUl0ZW1Bc0NvbHVtbkRlZmluaXRpb24iLCJ1c2VTZXRSZWNvcmRHcm91cHMiLCJyZWNvcmRJbmRleEZpZWxkRGVmaW5pdGlvbnNTdGF0ZSIsInJlY29yZEluZGV4SXNDb21wYWN0TW9kZUFjdGl2ZVN0YXRlIiwicmVjb3JkSW5kZXhLYW5iYW5BZ2dyZWdhdGVPcGVyYXRpb25TdGF0ZSIsInJlY29yZEluZGV4S2FuYmFuRmllbGRNZXRhZGF0YUlkU3RhdGUiLCJyZWNvcmRJbmRleE9wZW5SZWNvcmRJblN0YXRlIiwicmVjb3JkSW5kZXhWaWV3VHlwZVN0YXRlIiwidXNlU2V0VGFibGVDb2x1bW5zIiwidmlld0ZpZWxkQWdncmVnYXRlT3BlcmF0aW9uU3RhdGUiLCJjb252ZXJ0QWdncmVnYXRlT3BlcmF0aW9uVG9FeHRlbmRlZEFnZ3JlZ2F0ZU9wZXJhdGlvbiIsImZpbHRlckF2YWlsYWJsZVRhYmxlQ29sdW1ucyIsImdldFJlY29yZEluZGV4SWRGcm9tT2JqZWN0TmFtZVBsdXJhbEFuZFZpZXdJZCIsInVzZVNldFJlY29pbENvbXBvbmVudFN0YXRlVjIiLCJtYXBWaWV3RmllbGRzVG9Db2x1bW5EZWZpbml0aW9ucyIsIm1hcFZpZXdGaWx0ZXJzVG9GaWx0ZXJzIiwidXNlUmVjb2lsQ2FsbGJhY2siLCJ1c2VTZXRSZWNvaWxTdGF0ZSIsImlzRGVlcGx5RXF1YWwiLCJpc0RlZmluZWQiLCJ1c2VMb2FkUmVjb3JkSW5kZXhTdGF0ZXMiLCJzZXRDb250ZXh0U3RvcmVUYXJnZXRlZFJlY29yZHNSdWxlQ29tcG9uZW50U3RhdGUiLCJzZXRSZWNvcmRJbmRleElzQ29tcGFjdE1vZGVBY3RpdmUiLCJzZXRSZWNvcmRJbmRleFZpZXdUeXBlIiwic2V0UmVjb3JkSW5kZXhPcGVuUmVjb3JkSW4iLCJzZXRSZWNvcmRJbmRleFZpZXdLYW5iYW5GaWVsZE1ldGFkYXRhSWRTdGF0ZSIsInNldFJlY29yZEluZGV4Vmlld0thbmJhbkFnZ3JlZ2F0ZU9wZXJhdGlvblN0YXRlIiwic2V0UmVjb3JkR3JvdXBzRnJvbVZpZXdHcm91cHMiLCJzZXRUYWJsZUNvbHVtbnMiLCJvblZpZXdGaWVsZHNDaGFuZ2UiLCJzZXQiLCJzbmFwc2hvdCIsInZpZXdGaWVsZHMiLCJvYmplY3RNZXRhZGF0YUl0ZW0iLCJyZWNvcmRJbmRleElkIiwiYWN0aXZlRmllbGRNZXRhZGF0YUl0ZW1zIiwiZmllbGRzIiwiZmlsdGVyIiwiaXNBY3RpdmUiLCJpc1N5c3RlbSIsImZpbHRlcmFibGVGaWVsZE1ldGFkYXRhSXRlbXMiLCJnZXRMb2FkYWJsZSIsIm9iamVjdE1ldGFkYXRhSXRlbUlkIiwiaWQiLCJnZXRWYWx1ZSIsInNvcnRhYmxlRmllbGRNZXRhZGF0YUl0ZW1zIiwiY29sdW1uRGVmaW5pdGlvbnMiLCJtYXAiLCJmaWVsZCIsImluZGV4IiwicG9zaXRpb24iLCJjb2x1bW4iLCJleGlzdHNJbkZpbHRlckRlZmluaXRpb25zIiwic29tZSIsImZpZWxkTWV0YWRhdGFJdGVtIiwiZmllbGRNZXRhZGF0YUlkIiwiZXhpc3RzSW5Tb3J0RGVmaW5pdGlvbnMiLCJpc0ZpbHRlcmFibGUiLCJpc1NvcnRhYmxlIiwibmV3RmllbGREZWZpbml0aW9ucyIsImV4aXN0aW5nUmVjb3JkSW5kZXhGaWVsZERlZmluaXRpb25zIiwidmlld0ZpZWxkIiwidmlld0ZpZWxkTWV0YWRhdGFUeXBlIiwiZmluZCIsInR5cGUiLCJhZ2dyZWdhdGVPcGVyYXRpb25Gb3JWaWV3RmllbGQiLCJ2aWV3RmllbGRJZCIsImNvbnZlcnRlZFZpZXdGaWVsZEFnZ3JlZ2F0ZU9wZXJhdGlvbiIsImFnZ3JlZ2F0ZU9wZXJhdGlvbiIsImxvYWRSZWNvcmRJbmRleFN0YXRlcyIsInZpZXciLCJuYW1lUGx1cmFsIiwidmlld0dyb3VwcyIsInByZXYiLCJmaWx0ZXJzIiwidmlld0ZpbHRlcnMiLCJvcGVuUmVjb3JkSW4iLCJrYW5iYW5GaWVsZE1ldGFkYXRhSWQiLCJrYW5iYW5BZ2dyZWdhdGVPcGVyYXRpb25GaWVsZE1ldGFkYXRhVHlwZSIsImthbmJhbkFnZ3JlZ2F0ZU9wZXJhdGlvbkZpZWxkTWV0YWRhdGFJZCIsIm9wZXJhdGlvbiIsImthbmJhbkFnZ3JlZ2F0ZU9wZXJhdGlvbiIsImlzQ29tcGFjdCJdLCJtYXBwaW5ncyI6IkFBQUEsU0FBU0EsNkNBQTZDLFFBQVEsdUVBQXVFO0FBQ3JJLFNBQVNDLGtEQUFrRCxRQUFRLDhFQUE4RTtBQUNqSixTQUFTQyxnREFBZ0QsUUFBUSw0RUFBNEU7QUFFN0ksU0FBU0MseUNBQXlDLFFBQVEsb0VBQW9FO0FBRTlILFNBQVNDLGtCQUFrQixRQUFRLHdEQUF3RDtBQUMzRixTQUFTQyxnQ0FBZ0MsUUFBUSx1RUFBdUU7QUFDeEgsU0FBU0MsbUNBQW1DLFFBQVEsMEVBQTBFO0FBQzlILFNBQVNDLHdDQUF3QyxRQUFRLCtFQUErRTtBQUN4SSxTQUFTQyxxQ0FBcUMsUUFBUSw0RUFBNEU7QUFDbEksU0FBU0MsNEJBQTRCLFFBQVEsbUVBQW1FO0FBQ2hILFNBQVNDLHdCQUF3QixRQUFRLCtEQUErRDtBQUN4RyxTQUFTQyxrQkFBa0IsUUFBUSx3REFBd0Q7QUFDM0YsU0FBU0MsZ0NBQWdDLFFBQVEsMkZBQTJGO0FBRTVJLFNBQVNDLHFEQUFxRCxRQUFRLDhFQUE4RTtBQUNwSixTQUFTQywyQkFBMkIsUUFBUSxvREFBb0Q7QUFDaEcsU0FBU0MsNkNBQTZDLFFBQVEsc0VBQXNFO0FBQ3BJLFNBQVNDLDRCQUE0QixRQUFRLDBFQUEwRTtBQUd2SCxTQUFTQyxnQ0FBZ0MsUUFBUSxpREFBaUQ7QUFDbEcsU0FBU0MsdUJBQXVCLFFBQVEsd0NBQXdDO0FBQ2hGLFNBQVNDLGlCQUFpQixFQUFFQyxpQkFBaUIsUUFBUSxTQUFTO0FBQzlELFNBQVNDLGFBQWEsUUFBUSx3QkFBd0I7QUFDdEQsU0FBU0MsU0FBUyxRQUFRLHNCQUFz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